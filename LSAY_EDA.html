<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>LSAY_EDA</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="LSAY_EDA_files/libs/clipboard/clipboard.min.js"></script>
<script src="LSAY_EDA_files/libs/quarto-html/quarto.js"></script>
<script src="LSAY_EDA_files/libs/quarto-html/popper.min.js"></script>
<script src="LSAY_EDA_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="LSAY_EDA_files/libs/quarto-html/anchor.min.js"></script>
<link href="LSAY_EDA_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="LSAY_EDA_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="LSAY_EDA_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="LSAY_EDA_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="LSAY_EDA_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="LSAY_EDA_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="LSAY_EDA_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="LSAY_EDA_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="LSAY_EDA_files/libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#lsay-2003-cohort" id="toc-lsay-2003-cohort" class="nav-link active" data-scroll-target="#lsay-2003-cohort">LSAY 2003 cohort</a>
  <ul class="collapse">
  <li><a href="#how-many-primary-school-teachers-are-in-the-data-set" id="toc-how-many-primary-school-teachers-are-in-the-data-set" class="nav-link" data-scroll-target="#how-many-primary-school-teachers-are-in-the-data-set">How many primary school teachers are in the data set?</a></li>
  <li><a href="#how-many-primary-school-teachers" id="toc-how-many-primary-school-teachers" class="nav-link" data-scroll-target="#how-many-primary-school-teachers">How many primary school teachers?</a></li>
  <li><a href="#what-did-these-people-study" id="toc-what-did-these-people-study" class="nav-link" data-scroll-target="#what-did-these-people-study">What did these people study?</a></li>
  <li><a href="#how-well-are-teachers-performing" id="toc-how-well-are-teachers-performing" class="nav-link" data-scroll-target="#how-well-are-teachers-performing">How well are teachers performing?</a></li>
  </ul></li>
  <li><a href="#lsay-2006-cohort" id="toc-lsay-2006-cohort" class="nav-link" data-scroll-target="#lsay-2006-cohort">LSAY 2006 cohort</a>
  <ul class="collapse">
  <li><a href="#how-many-people-in-the-2006-were-studying-primary-school-teaching" id="toc-how-many-people-in-the-2006-were-studying-primary-school-teaching" class="nav-link" data-scroll-target="#how-many-people-in-the-2006-were-studying-primary-school-teaching">How many people in the 2006 were studying primary school teaching?</a></li>
  <li><a href="#performance-of-2006-cohort" id="toc-performance-of-2006-cohort" class="nav-link" data-scroll-target="#performance-of-2006-cohort">Performance of 2006 cohort</a></li>
  </ul></li>
  <li><a href="#lsay-2009-cohort" id="toc-lsay-2009-cohort" class="nav-link" data-scroll-target="#lsay-2009-cohort">LSAY 2009 cohort</a>
  <ul class="collapse">
  <li><a href="#how-many-people-in-the-2009-cohort-studied-teaching" id="toc-how-many-people-in-the-2009-cohort-studied-teaching" class="nav-link" data-scroll-target="#how-many-people-in-the-2009-cohort-studied-teaching">How many people in the 2009 cohort studied teaching?</a></li>
  <li><a href="#performance-of-2009-cohort" id="toc-performance-of-2009-cohort" class="nav-link" data-scroll-target="#performance-of-2009-cohort">Performance of 2009 cohort</a></li>
  </ul></li>
  <li><a href="#lsay-2015" id="toc-lsay-2015" class="nav-link" data-scroll-target="#lsay-2015">LSAY 2015</a>
  <ul class="collapse">
  <li><a href="#how-many-people-in-the-2015-cohort-studied-teaching" id="toc-how-many-people-in-the-2015-cohort-studied-teaching" class="nav-link" data-scroll-target="#how-many-people-in-the-2015-cohort-studied-teaching">How many people in the 2015 cohort studied teaching?</a></li>
  <li><a href="#how-many-teachers-in-the-2015-cohort" id="toc-how-many-teachers-in-the-2015-cohort" class="nav-link" data-scroll-target="#how-many-teachers-in-the-2015-cohort">How many teachers in the 2015 cohort?</a></li>
  <li><a href="#what-did-these-teachers-study" id="toc-what-did-these-teachers-study" class="nav-link" data-scroll-target="#what-did-these-teachers-study">What did these teachers study?</a></li>
  <li><a href="#performance-of-2015-cohort" id="toc-performance-of-2015-cohort" class="nav-link" data-scroll-target="#performance-of-2015-cohort">Performance of 2015 cohort</a></li>
  </ul></li>
  <li><a href="#creating-a-barplot-of-counts-of-teachers-in-each-year" id="toc-creating-a-barplot-of-counts-of-teachers-in-each-year" class="nav-link" data-scroll-target="#creating-a-barplot-of-counts-of-teachers-in-each-year">creating a barplot of counts of teachers in each year</a>
  <ul class="collapse">
  <li><a href="#visualise-performance" id="toc-visualise-performance" class="nav-link" data-scroll-target="#visualise-performance">Visualise performance</a></li>
  <li><a href="#comparing-teacher-performance-with-other-professionals" id="toc-comparing-teacher-performance-with-other-professionals" class="nav-link" data-scroll-target="#comparing-teacher-performance-with-other-professionals">Comparing Teacher Performance with other Professionals</a></li>
  </ul></li>
  <li><a href="#weighted-average-across-the-years" id="toc-weighted-average-across-the-years" class="nav-link" data-scroll-target="#weighted-average-across-the-years">WEIGHTED AVERAGE ACROSS THE YEARS</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">LSAY_EDA</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-messages="false">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/00-setup.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -------------- 
You are rad! 
 --------------
    \
      \
        \
          _____
       .'` ,-. `'.
      /   ([ ])   \
     /.-""`(`)`""-.\
      &lt;'```(.)```'&gt;
      &lt;'```(.)```'&gt;
       &lt;'``(.)``'&gt;
   sk   &lt;``\_/``&gt;
         `'---'`
  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reading in the data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>LSAY2003 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/lsay_data/au.edu.anu.ada.ddi.01111_v7.1_unrestricted.dta"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>LSAY2006 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/lsay_data/au.edu.anu.ada.ddi.01137_v10.1_unrestricted.dta"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>LSAY2009 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/lsay_data/au.edu.anu.ada.ddi.30023v9_unrestricted.dta"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>LSAY2015 <span class="ot">&lt;-</span> <span class="fu">read_dta</span>(<span class="st">"data/lsay_data/2_LSAY_Y15_2022_STATA_01392_general.dta"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="lsay-2003-cohort" class="level2">
<h2 class="anchored" data-anchor-id="lsay-2003-cohort">LSAY 2003 cohort</h2>
<section id="how-many-primary-school-teachers-are-in-the-data-set" class="level3">
<h3 class="anchored" data-anchor-id="how-many-primary-school-teachers-are-in-the-data-set">How many primary school teachers are in the data set?</h3>
<p>To explore this in the Y03 data, we will look for the ASCED code <code>070103</code> (Teacher Education: Primary) in variables relating to questions focused at main area of study/training in this course at any given year: LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>unique_studying_teachers_y03 <span class="ot">&lt;-</span> LSAY2003 <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selecting variables for current area of study</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation to replace 0 = not '70103', 1 = is '70103', NA values retained</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'70103'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># Retain NA</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new column where any 1 in the row = TRUE, no 1 = FALSE</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LBCZ087, LCCZ087, LDCZ087, LEC087, LFC087, LGC087, LHC087, LIC087, LJC088, LKC088), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep TRUE values</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(teachers)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating table to display results</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a> unique_studying_teachers_y03_tbl <span class="ot">&lt;-</span> <span class="fu">kbl</span>(unique_studying_teachers_y03, <span class="at">caption =</span> <span class="st">"Count of Primary School Education Students in Y03 Data."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"1200px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying table </span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>unique_studying_teachers_y03_tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; overflow-x: scroll; width:1200px; ">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Count of Primary School Education Students in Y03 Data.</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">STIDSTD</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LBCZ087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LCCZ087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LDCZ087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LEC087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LFC087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LGC087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LHC087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LIC087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LJC088</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LKC088</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">teachers</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">921</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">1949</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2416</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">2659</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2999</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">3440</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3473</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">3863</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4386</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">4504</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4663</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">4966</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5641</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">6127</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7557</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">7834</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7993</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">8170</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9031</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">9138</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9362</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">9432</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10049</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">10377</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10725</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">11022</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11837</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: right;">11866</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11947</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">TRUE</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<p>There were <strong>29</strong> people studying primary school teaching at some point in the Y03 data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Looking at student ID 2659 and 9362</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable LHC087 (Main area of study: 2010) as both returned 0 here.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>students_left_teaching <span class="ot">&lt;-</span> LSAY2003 <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(STIDSTD <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2659</span>, <span class="dv">10049</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LDCZ087, LHC087) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NEW_COURSE =</span> <span class="fu">c</span>(<span class="st">"Business Management"</span>, <span class="st">"Human Movement"</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(students_left_teaching, <span class="at">caption =</span> <span class="st">"Closer look at students who left teaching."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"945px"</span>, <span class="at">height =</span> <span class="st">"200px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:200px; overflow-x: scroll; width:945px; ">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Closer look at students who left teaching.</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">STIDSTD</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LDCZ087</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">LHC087</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">NEW_COURSE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2659</td>
<td style="text-align: right;">70103</td>
<td style="text-align: right;">80301</td>
<td style="text-align: left;">Business Management</td>
</tr>
<tr class="even">
<td style="text-align: right;">10049</td>
<td style="text-align: right;">70103</td>
<td style="text-align: right;">69903</td>
<td style="text-align: left;">Human Movement</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<ul>
<li><p><strong>Student 2659</strong> went into another field of study four years after:</p>
<p>Business management (80301)</p></li>
<li><p><strong>Student 10049</strong> went into another field of study four years after:</p>
<p>Human Movement (69903)</p></li>
</ul>
</section>
<section id="how-many-primary-school-teachers" class="level3">
<h3 class="anchored" data-anchor-id="how-many-primary-school-teachers">How many primary school teachers?</h3>
<p>To see how many people were working as a primary school teacher at any point of responding to the questions, we focused on finding the ANSZVO code <code>2412</code> in variables related to the question:</p>
<p><u>“What kind of work do you do?”</u></p>
<ul>
<li>LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>unique_teachers_y03 <span class="ot">&lt;-</span> LSAY2003 <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecting variables related to question: 'What kind of work do you do?'</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Converting to character</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation 0 = not teacher, 1 = teacher, NA = NA. </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    . <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="co"># Teacher = 1</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># NA values retained</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span> <span class="co"># Non-teacher = 0.</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  ))) <span class="sc">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># New column where 1 across row = TRUE(Teacher), all else = FALSE </span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">actual_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LDD025, LED025, LFD025, LGD025, LHD029, LID029, LJD029, LKD029), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(actual_teachers) <span class="co"># Filtering for TRUE condition</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating table to display results</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a> unique_teachers_yo3_table <span class="ot">&lt;-</span> <span class="fu">kbl</span>(unique_teachers_y03, <span class="at">caption =</span> <span class="st">"Number of Teachers in the Y03 Data."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"1200px"</span>, <span class="at">height =</span> <span class="st">"400px"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-did-these-people-study" class="level3">
<h3 class="anchored" data-anchor-id="what-did-these-people-study">What did these people study?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting IDs of previously identified Y03 Teachers</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>teacher_jobs <span class="ot">&lt;-</span> LSAY2003[LSAY2003<span class="sc">$</span>STIDSTD <span class="sc">%in%</span> unique_teachers_y03<span class="sc">$</span>STIDSTD, ]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Using those IDs and selecting area of study variables across given years</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>teachers_aos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'STIDSTD'</span>, <span class="st">'LBCZ087'</span>, <span class="st">'LCCZ087'</span>, <span class="st">'LDCZ087'</span>, <span class="st">'LEC087'</span>, <span class="st">'LFC087'</span>, <span class="st">'LGC087'</span>, <span class="st">'LHC087'</span>, <span class="st">'LIC087'</span>, <span class="st">'LJC088'</span>, <span class="st">'LKC088'</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>teacher_jobs <span class="ot">&lt;-</span> teacher_jobs[, teachers_aos]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># table to visualise what teachers studied more clearly</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>fields <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Codes =</span> <span class="fu">c</span>(<span class="dv">70101</span>, <span class="dv">70103</span>, <span class="dv">70109</span>, <span class="dv">70199</span>, <span class="dv">70115</span>, <span class="dv">90503</span>, <span class="dv">91703</span>, <span class="dv">92101</span>, <span class="dv">100101</span>, <span class="dv">80101</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Field_of_Education</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Early Childhood"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Primary"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Vocational Education and Training"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education, n.e.c."</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"English as a Second Language Teaching"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Children's Services"</span>, </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Religious Studies"</span>, </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Sport and Recreation Activities"</span>,</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Music"</span>, <span class="st">"Accounting"</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a> fields <span class="ot">&lt;-</span> <span class="fu">kbl</span>(fields, <span class="at">caption =</span> <span class="st">"Area of Study for Teachers in Y03."</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"1000px"</span>, <span class="at">height =</span> <span class="st">"300px"</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>fields</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:1000px; ">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Area of Study for Teachers in Y03.</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">Codes</th>
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">Field_of_Education</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">70101</td>
<td style="text-align: left;">Teacher Education: Early Childhood</td>
</tr>
<tr class="even">
<td style="text-align: right;">70103</td>
<td style="text-align: left;">Teacher Education: Primary</td>
</tr>
<tr class="odd">
<td style="text-align: right;">70109</td>
<td style="text-align: left;">Teacher Education: Vocational Education and Training</td>
</tr>
<tr class="even">
<td style="text-align: right;">70199</td>
<td style="text-align: left;">Teacher Education, n.e.c.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">70115</td>
<td style="text-align: left;">English as a Second Language Teaching</td>
</tr>
<tr class="even">
<td style="text-align: right;">90503</td>
<td style="text-align: left;">Children's Services</td>
</tr>
<tr class="odd">
<td style="text-align: right;">91703</td>
<td style="text-align: left;">Religious Studies</td>
</tr>
<tr class="even">
<td style="text-align: right;">92101</td>
<td style="text-align: left;">Sport and Recreation Activities</td>
</tr>
<tr class="odd">
<td style="text-align: right;">100101</td>
<td style="text-align: left;">Music</td>
</tr>
<tr class="even">
<td style="text-align: right;">80101</td>
<td style="text-align: left;">Accounting</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
</section>
<section id="how-well-are-teachers-performing" class="level3">
<h3 class="anchored" data-anchor-id="how-well-are-teachers-performing">How well are teachers performing?</h3>
<ul>
<li><p>Determine the percentage of primary teachers in the sample below the National proficient standard</p></li>
<li><p>Determine the average achievement of primary teachers in the sample (in PISA points)</p></li>
</ul>
<p>We begin by checking that our analysis is working correctly by calculating the mean maths performance in each state in PISA 2003, and checking our numbers accord with those reported in Table 3.3, page. 81 by ACER <a href="https://www.acer.org/files/PISA_screen.pdf">here</a>. Our numbers are different, which is because there is a mismatch between the national sample and the LSAY sample.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using intsvy package to calculate average scores for each state</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(intsvy)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>pisa_state <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">by =</span> <span class="st">"STATEID"</span>, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                           <span class="at">data =</span> LSAY2003) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">STATE =</span> <span class="fu">c</span>(<span class="st">"ACT"</span>, <span class="st">"NSW"</span>, <span class="st">"VIC"</span>, <span class="st">"QLD"</span>, <span class="st">"SA"</span>, <span class="st">"WA"</span>, <span class="st">"TAS"</span>, <span class="st">"NT"</span>), <span class="at">.before =</span> <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>STATEID)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparing to entire PISA dataset</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>pisa_2003 <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_sav</span>(<span class="st">"data/lsay_data/CY02_AUS_PISA2003_StdQ_AchieveandSchQ_forPublic_Release.sav"</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to rename to uppercase, because intsvy::pisa.mean.pv requires capitals</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pisa_2003) <span class="ot">&lt;-</span> <span class="fu">toupper</span>(<span class="fu">names</span>(pisa_2003))</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>pisa_state_total <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                           <span class="at">by =</span> <span class="st">"STATE"</span>, </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                           <span class="at">data =</span> pisa_2003)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a> pisa_state <span class="ot">&lt;-</span> <span class="fu">kbl</span>(pisa_state, <span class="at">caption =</span> <span class="st">"Average Math Performance Across States"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scroll_box</span>(<span class="at">width =</span> <span class="st">"1000px"</span>, <span class="at">height =</span> <span class="st">"300px"</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>pisa_state</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:1000px; ">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Average Math Performance Across States</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: left; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">STATE</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">Freq</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">Mean</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">s.e.</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">SD</th>
<th data-quarto-table-cell-role="th" style="text-align: right; font-weight: bold; background-color: orange !important; position: sticky; top: 0; background-color: #FFFFFF;">s.e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ACT</td>
<td style="text-align: right;">726</td>
<td style="text-align: right;">555.09</td>
<td style="text-align: right;">3.35</td>
<td style="text-align: right;">92.90</td>
<td style="text-align: right;">2.84</td>
</tr>
<tr class="even">
<td style="text-align: left;">NSW</td>
<td style="text-align: right;">2363</td>
<td style="text-align: right;">531.37</td>
<td style="text-align: right;">4.81</td>
<td style="text-align: right;">94.22</td>
<td style="text-align: right;">3.04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">VIC</td>
<td style="text-align: right;">2020</td>
<td style="text-align: right;">514.01</td>
<td style="text-align: right;">4.89</td>
<td style="text-align: right;">91.93</td>
<td style="text-align: right;">2.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">QLD</td>
<td style="text-align: right;">1631</td>
<td style="text-align: right;">531.07</td>
<td style="text-align: right;">4.90</td>
<td style="text-align: right;">93.05</td>
<td style="text-align: right;">1.99</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SA</td>
<td style="text-align: right;">1039</td>
<td style="text-align: right;">540.24</td>
<td style="text-align: right;">4.99</td>
<td style="text-align: right;">92.94</td>
<td style="text-align: right;">2.73</td>
</tr>
<tr class="even">
<td style="text-align: left;">WA</td>
<td style="text-align: right;">1482</td>
<td style="text-align: right;">552.20</td>
<td style="text-align: right;">4.48</td>
<td style="text-align: right;">89.71</td>
<td style="text-align: right;">2.62</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TAS</td>
<td style="text-align: right;">680</td>
<td style="text-align: right;">515.80</td>
<td style="text-align: right;">9.22</td>
<td style="text-align: right;">90.40</td>
<td style="text-align: right;">3.13</td>
</tr>
<tr class="even">
<td style="text-align: left;">NT</td>
<td style="text-align: right;">429</td>
<td style="text-align: right;">511.99</td>
<td style="text-align: right;">5.70</td>
<td style="text-align: right;">91.54</td>
<td style="text-align: right;">4.25</td>
</tr>
</tbody>
</table>
</div>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the IDs of the teachers</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>teacher_ids_y03 <span class="ot">&lt;-</span> unique_teachers_y03<span class="sc">$</span>STIDSTD</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># create a table for LSAY2003 splitting teachers and non-teachers</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>LSAY2003_teachflag <span class="ot">&lt;-</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  LSAY2003 <span class="sc">|&gt;</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="fu">if_else</span>(STIDSTD <span class="sc">%in%</span> teacher_ids_y03, T, F))</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(LSAY2003_teachflag<span class="sc">$</span>teacher)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
FALSE  TRUE 
10226   144 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using rrepest package to calculate mean and standard deviation</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>pisa2003_avg_and_mean <span class="ot">&lt;-</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2003_teachflag,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"std"</span>),<span class="st">"pv@math"</span>),</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"teacher"</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> T)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>pisa2003_avg_and_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-898f83f0{}.cl-898c68d2{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-898c68e6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-898db25a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-898db264{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-898db265{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-898db26e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-898dbb9c{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbb9d{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbb9e{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbba6{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbba7{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbba8{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbba9{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbaa{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbb0{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbb1{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbb2{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbb3{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbba{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbbb{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbbc{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbc4{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbc5{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbc6{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbc7{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-898dbbce{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-898f83f0"><thead><tr style="overflow-wrap:break-word;"><th rowspan="3" class="cl-898dbb9c"><p class="cl-898db25a"><span class="cl-898c68d2">teacher</span></p></th><th colspan="4" class="cl-898dbb9d"><p class="cl-898db264"><span class="cl-898c68d2">pv@math</span></p></th></tr><tr style="overflow-wrap:break-word;"><th colspan="2" class="cl-898dbba8"><p class="cl-898db264"><span class="cl-898c68d2">mean</span></p></th><th colspan="2" class="cl-898dbba9"><p class="cl-898db264"><span class="cl-898c68d2">std</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-898dbbb1"><p class="cl-898db264"><span class="cl-898c68d2">B</span></p></th><th class="cl-898dbbb2"><p class="cl-898db264"><span class="cl-898c68d2">SE</span></p></th><th class="cl-898dbbb2"><p class="cl-898db264"><span class="cl-898c68d2">B</span></p></th><th class="cl-898dbbb3"><p class="cl-898db264"><span class="cl-898c68d2">SE</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-898dbbba"><p class="cl-898db265"><span class="cl-898c68e6">FALSE</span></p></td><td class="cl-898dbbbb"><p class="cl-898db26e"><span class="cl-898c68e6">530.3</span></p></td><td class="cl-898dbbbc"><p class="cl-898db26e"><span class="cl-898c68e6">2.4</span></p></td><td class="cl-898dbbbc"><p class="cl-898db26e"><span class="cl-898c68e6">92.9</span></p></td><td class="cl-898dbbc4"><p class="cl-898db26e"><span class="cl-898c68e6">2.4</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-898dbbc5"><p class="cl-898db265"><span class="cl-898c68e6">TRUE</span></p></td><td class="cl-898dbbc6"><p class="cl-898db26e"><span class="cl-898c68e6">554.0</span></p></td><td class="cl-898dbbc7"><p class="cl-898db26e"><span class="cl-898c68e6">10.5</span></p></td><td class="cl-898dbbc7"><p class="cl-898db26e"><span class="cl-898c68e6">64.8</span></p></td><td class="cl-898dbbce"><p class="cl-898db26e"><span class="cl-898c68e6">5.3</span></p></td></tr></tbody></table></div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualise distributions</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">0</span>, <span class="dv">1000</span>)), </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(x)) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> <span class="dv">144</span>, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> pisa2003_avg_and_mean<span class="sc">$</span>body<span class="sc">$</span>dataset<span class="sc">$</span><span class="st">`</span><span class="at">pv@math..mean..B</span><span class="st">`</span>[<span class="dv">2</span>], <span class="at">sd =</span> pisa2003_avg_and_mean<span class="sc">$</span>body<span class="sc">$</span>dataset<span class="sc">$</span><span class="st">`</span><span class="at">pv@math..std..B</span><span class="st">`</span>[<span class="dv">2</span>])) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> <span class="dv">10226</span>, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> pisa2003_avg_and_mean<span class="sc">$</span>body<span class="sc">$</span>dataset<span class="sc">$</span><span class="st">`</span><span class="at">pv@math..mean..B</span><span class="st">`</span>[<span class="dv">1</span>], <span class="at">sd =</span> pisa2003_avg_and_mean<span class="sc">$</span>body<span class="sc">$</span>dataset<span class="sc">$</span><span class="st">`</span><span class="at">pv@math..std..B</span><span class="st">`</span>[<span class="dv">1</span>]), </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> grattan_red) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_grattan</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers' maths ability is less variable with a higher average"</span>, </span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Probability distribution of Mathematics achievement in PISA 2003&lt;br&gt; for {colour_text(grattan_orange, 'teachers')} and {colour_text(grattan_red, 'non-teachers')}"</span>), </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">notes =</span> <span class="st">"Note: Assumes a normal distribution, which may not be true given the small counts"</span>, </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"PISA scale score in Mathematics"</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating columns to indicate if teacher was proficient or not</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>LSAY2003_proficiency <span class="ot">&lt;-</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  LSAY2003_teachflag <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(PV1MATH<span class="sc">:</span>PV5MATH,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">&gt;=</span> <span class="dv">482</span>, <span class="st">"Proficient"</span>, <span class="st">"Not proficient"</span>, <span class="at">missing =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"{col}proficient"</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># finding percentage and standard error of teachers and non-teachers proficient in math</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>LSAY2003_agprof <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2003_proficiency,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="st">"freq"</span>,<span class="st">"pv@mathproficient"</span>),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="st">"teacher"</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)), </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="lsay-2006-cohort" class="level2">
<h2 class="anchored" data-anchor-id="lsay-2006-cohort">LSAY 2006 cohort</h2>
<section id="how-many-people-in-the-2006-were-studying-primary-school-teaching" class="level3">
<h3 class="anchored" data-anchor-id="how-many-people-in-the-2006-were-studying-primary-school-teaching">How many people in the 2006 were studying primary school teaching?</h3>
<p>Looking for variables linked with the question: “What is your main area of study or training in this (apprenticeship/traineeship/course)?”</p>
<ul>
<li>LBC087, LCC087, LDC087, LEC087, LFC087, LGC088, LHC088, LIC088, LJC088, LKC088</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>studying_teachers_2006 <span class="ot">&lt;-</span> LSAY2006 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selecting variables for current area of study</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LBC087, LCC087, LDC087, LEC087, LFC087, LGC088, LHC088, LIC088, LJC088, LKC088) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation to replace 0 = not '70103', 1 = is '70103'</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LBC087, LCC087, LDC087, LEC087, LFC087, LGC088, LHC088, LIC088, LJC088, LKC088),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'70103'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># Retain NA</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new column where any 1 in the row = TRUE, no 1 = FALSE</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unique_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LBC087, LCC087, LDC087, LEC087, LFC087, LGC088, LHC088, LIC088, LJC088, LKC088), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep TRUE values</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unique_teachers)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>studying_teachers_2006</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 12
   STIDSTD LBC087 LCC087 LDC087 LEC087 LFC087 LGC088 LHC088 LIC088 LJC088 LKC088
     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1     742     NA     NA     NA     NA     NA     NA     NA      1     NA     NA
 2     746     NA     NA     NA      0     NA      1     NA     NA     NA     NA
 3     947     NA     NA     NA      1     NA     NA     NA     NA     NA     NA
 4    1530     NA     NA     NA     NA     NA     NA     NA      0      1     NA
 5    1628     NA     NA     NA     NA      1     NA     NA     NA     NA     NA
 6    4340     NA     NA     NA     NA     NA     NA      1     NA     NA     NA
 7    5391     NA     NA     NA     NA     NA     NA      1     NA     NA     NA
 8    5904     NA     NA     NA      0      1     NA     NA     NA     NA     NA
 9    6239     NA     NA     NA     NA     NA      1     NA     NA     NA     NA
10    6263     NA     NA     NA      1     NA     NA     NA     NA     NA     NA
# ℹ 19 more rows
# ℹ 1 more variable: unique_teachers &lt;lgl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Looking at people who were at the time working as PS Teachers</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>teachers_2006 <span class="ot">&lt;-</span> LSAY2006 <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecting variables for kind of work</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, ANZSCO, LBD011, LCD024, LDD024, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation </span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(ANZSCO, LBD011, LCD024, LDD024, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># column for TRUE = legit teachers, FALSE = not teachers</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teachers_2006 =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(ANZSCO, LBD011, LCD024, LDD024, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for TRUE condition</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(teachers_2006)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Taking a look at Y06 Teachers area of study</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>teacher_jobs_06 <span class="ot">&lt;-</span> LSAY2006[LSAY2006<span class="sc">$</span>STIDSTD <span class="sc">%in%</span> teachers_2006<span class="sc">$</span>STIDSTD, ]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting teacher student IDs and variables related to area of study across the years</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'STIDSTD'</span>, <span class="st">'LBC087'</span>, <span class="st">'LCC087'</span>, <span class="st">'LDC087'</span>, <span class="st">'LEC087'</span>, <span class="st">'LFC087'</span>, <span class="st">'LGC088'</span>, <span class="st">'LHC088'</span>, <span class="st">'LIC088'</span>, <span class="st">'LJC088'</span>, <span class="st">'LKC088'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>teacher_jobs_06 <span class="ot">&lt;-</span> teacher_jobs_06[, selected_columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a table to see what the teachers studied</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>aos_2006 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Code =</span> <span class="fu">c</span>(<span class="dv">100705</span>, <span class="dv">100103</span>, <span class="dv">100101</span>, <span class="dv">80399</span>, <span class="dv">70103</span>, <span class="dv">70101</span>, <span class="dv">70105</span>, <span class="dv">70199</span>, <span class="dv">91701</span>, <span class="dv">60901</span>, <span class="dv">61399</span>, <span class="dv">60101</span>, <span class="dv">91703</span>, <span class="dv">80101</span>, <span class="dv">81101</span>, <span class="dv">91523</span>, <span class="dv">90513</span>),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Field =</span> <span class="fu">c</span>(</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Written Communication"</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Drama and Theatre Studies"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Music"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Business and Management, n.e.c."</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Primary"</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Early Childhood"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Secondary"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education, n.e.c."</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Philosophy"</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Optometry"</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Public Health, n.e.c."</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"General Medicine"</span>,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Religious Studies"</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Accounting"</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Banking and Finance"</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Literature"</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Counselling"</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>aos_2006 <span class="ot">&lt;-</span> <span class="fu">kable</span>(aos_2006, <span class="at">caption =</span> <span class="st">"Field of Education Codes 2006"</span>, <span class="at">align =</span> <span class="st">"c"</span>, <span class="at">booktabs =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>aos_2006</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Field of Education Codes 2006</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; color: white !important; background-color: orange !important;">Code</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; color: white !important; background-color: orange !important;">Field</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">100705</td>
<td style="text-align: center;">Written Communication</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">100103</td>
<td style="text-align: center;">Drama and Theatre Studies</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">100101</td>
<td style="text-align: center;">Music</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">80399</td>
<td style="text-align: center;">Business and Management, n.e.c.</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">70103</td>
<td style="text-align: center;">Teacher Education: Primary</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">70101</td>
<td style="text-align: center;">Teacher Education: Early Childhood</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">70105</td>
<td style="text-align: center;">Teacher Education: Secondary</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">70199</td>
<td style="text-align: center;">Teacher Education, n.e.c.</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">91701</td>
<td style="text-align: center;">Philosophy</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">60901</td>
<td style="text-align: center;">Optometry</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">61399</td>
<td style="text-align: center;">Public Health, n.e.c.</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">60101</td>
<td style="text-align: center;">General Medicine</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">91703</td>
<td style="text-align: center;">Religious Studies</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">80101</td>
<td style="text-align: center;">Accounting</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">81101</td>
<td style="text-align: center;">Banking and Finance</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">91523</td>
<td style="text-align: center;">Literature</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">90513</td>
<td style="text-align: center;">Counselling</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</div>
</section>
<section id="performance-of-2006-cohort" class="level3">
<h3 class="anchored" data-anchor-id="performance-of-2006-cohort">Performance of 2006 cohort</h3>
<ul>
<li><p>Determine the percentage of primary teachers in the sample below the National proficient standard</p></li>
<li><p>Determine the average achievement of primary teachers in the sample (in PISA points)</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a 2006 flag to distinguish between teachers and non-teachers</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>teacher_ids_2006 <span class="ot">&lt;-</span> teachers_2006<span class="sc">$</span>STIDSTD</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>LSAY2006_teachflag <span class="ot">&lt;-</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  LSAY2006 <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="fu">if_else</span>(STIDSTD <span class="sc">%in%</span> teacher_ids_2006, T, F))</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the average and standard deviation of both groups</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>pisa2006_avg_and_mean <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2006_teachflag,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"std"</span>),<span class="st">"pv@math"</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"teacher"</span>),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)),</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> T)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>pisa2006_avg_and_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-950b92e6{}.cl-9508e79e{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9508e7a8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-950a039a{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-950a039b{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-950a03a4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-950a03a5{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-950a0b1a{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b1b{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b24{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b25{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b26{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b2e{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b2f{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b30{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b38{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b39{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b3a{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b42{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b43{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b44{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b45{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b4c{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b4d{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b4e{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b56{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-950a0b57{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-950b92e6"><thead><tr style="overflow-wrap:break-word;"><th rowspan="3" class="cl-950a0b1a"><p class="cl-950a039a"><span class="cl-9508e79e">teacher</span></p></th><th colspan="4" class="cl-950a0b1b"><p class="cl-950a039b"><span class="cl-9508e79e">pv@math</span></p></th></tr><tr style="overflow-wrap:break-word;"><th colspan="2" class="cl-950a0b2e"><p class="cl-950a039b"><span class="cl-9508e79e">mean</span></p></th><th colspan="2" class="cl-950a0b2f"><p class="cl-950a039b"><span class="cl-9508e79e">std</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-950a0b39"><p class="cl-950a039b"><span class="cl-9508e79e">B</span></p></th><th class="cl-950a0b3a"><p class="cl-950a039b"><span class="cl-9508e79e">SE</span></p></th><th class="cl-950a0b3a"><p class="cl-950a039b"><span class="cl-9508e79e">B</span></p></th><th class="cl-950a0b42"><p class="cl-950a039b"><span class="cl-9508e79e">SE</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-950a0b43"><p class="cl-950a03a4"><span class="cl-9508e7a8">FALSE</span></p></td><td class="cl-950a0b44"><p class="cl-950a03a5"><span class="cl-9508e7a8">518.6</span></p></td><td class="cl-950a0b45"><p class="cl-950a03a5"><span class="cl-9508e7a8">3.0</span></p></td><td class="cl-950a0b45"><p class="cl-950a03a5"><span class="cl-9508e7a8">87.9</span></p></td><td class="cl-950a0b4c"><p class="cl-950a03a5"><span class="cl-9508e7a8">1.2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-950a0b4d"><p class="cl-950a03a4"><span class="cl-9508e7a8">TRUE</span></p></td><td class="cl-950a0b4e"><p class="cl-950a03a5"><span class="cl-9508e7a8">550.7</span></p></td><td class="cl-950a0b56"><p class="cl-950a03a5"><span class="cl-9508e7a8">10.4</span></p></td><td class="cl-950a0b56"><p class="cl-950a03a5"><span class="cl-9508e7a8">67.2</span></p></td><td class="cl-950a0b57"><p class="cl-950a03a5"><span class="cl-9508e7a8">8.2</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seeing teachers who are proficient and not proficient</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>LSAY2006_proficiency <span class="ot">&lt;-</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  LSAY2006_teachflag <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(PV1MATH<span class="sc">:</span>PV5MATH,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">&gt;=</span> <span class="dv">482</span>, <span class="st">"Proficient"</span>, <span class="st">"Not proficient"</span>, <span class="at">missing =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"{col}proficient"</span>))</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the percentage and standard error of both groups who are proficient and not</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>LSAY2006_agprof <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2006_proficiency,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="st">"freq"</span>,<span class="st">"pv@mathproficient"</span>),</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="st">"teacher"</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)), </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> F)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>LSAY2006_agprof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  teacher b.pv@mathproficient.No…¹ se.pv@mathproficient…² b.pv@mathproficient.…³
  &lt;chr&gt;                      &lt;dbl&gt;                  &lt;dbl&gt;                  &lt;dbl&gt;
1 FALSE                       34.0                   1.22                   66.0
2 TRUE                        15.4                   4.82                   84.6
# ℹ abbreviated names: ¹​`b.pv@mathproficient.Not proficient`,
#   ²​`se.pv@mathproficient.Not proficient`, ³​`b.pv@mathproficient.Proficient`
# ℹ 1 more variable: `se.pv@mathproficient.Proficient` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="lsay-2009-cohort" class="level2">
<h2 class="anchored" data-anchor-id="lsay-2009-cohort">LSAY 2009 cohort</h2>
<section id="how-many-people-in-the-2009-cohort-studied-teaching" class="level3">
<h3 class="anchored" data-anchor-id="how-many-people-in-the-2009-cohort-studied-teaching">How many people in the 2009 cohort studied teaching?</h3>
<p>“What is your main area of study or training in this (apprenceship/traineeship/course)?” * LBC089, LCC088, LDC088, LEC088, LFC088, LGC088, LHC088, LIC088, LJC088, LKC088</p>
<p>Then filtering for ASCED code <code>70103</code> (Teacher Education: Primary)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>studying_teachers_2009 <span class="ot">&lt;-</span> LSAY2009 <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selecting variables for current area of study</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LBC089, LCC088, LDC088, LEC088, LFC088, LGC088, LHC088, LIC088, LJC088, LKC088) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate across the observation to replace 0 = not '70103', 1 = is '70103'</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LBC089, LCC088, LDC088, LEC088, LFC088, LGC088, LHC088, LIC088, LJC088, LKC088),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'70103'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># Retain NA</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create new column where any 1 in the row = TRUE, no 1 = FALSE</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unique_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LBC089, LCC088, LDC088, LEC088, LFC088, LGC088, LHC088, LIC088, LJC088, LKC088), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep TRUE values</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unique_teachers)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>studying_teachers_2009</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28 × 12
   STIDSTD LBC089 LCC088 LDC088 LEC088 LFC088 LGC088 LHC088 LIC088 LJC088 LKC088
   &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 01258       NA     NA     NA     NA      0      1     NA     NA     NA     NA
 2 01386       NA     NA     NA      1     NA     NA     NA     NA     NA     NA
 3 01388       NA     NA     NA     NA     NA     NA     NA      1     NA     NA
 4 02316       NA     NA     NA     NA     NA     NA     NA      1     NA     NA
 5 02816       NA     NA     NA      1     NA     NA     NA     NA     NA     NA
 6 03779       NA     NA     NA     NA     NA     NA     NA     NA      1     NA
 7 04324       NA     NA     NA      0     NA     NA      1     NA     NA     NA
 8 05514       NA     NA     NA      0      1      0     NA     NA     NA     NA
 9 05749       NA     NA     NA     NA     NA     NA     NA      1     NA     NA
10 06376       NA     NA      1     NA     NA     NA     NA     NA     NA     NA
# ℹ 18 more rows
# ℹ 1 more variable: unique_teachers &lt;lgl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># finding teachers in the 2009 cohort</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>teachers_2009 <span class="ot">&lt;-</span> LSAY2009 <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selecting variables for kind of work</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, ANZSCO73, LBD014, LCD029, LDD029, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation </span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(ANZSCO73, LBD014, LCD029, LDD029, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># column for TRUE = legit teachers, FALSE = not teachers</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">legit_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(ANZSCO73, LBD014, LCD029, LDD029, LED029, LFD029, LGD029, LHD029, LID029, LJD029, LKD029), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for TRUE condition</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(legit_teachers)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>teachers_2009</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 121 × 13
   STIDSTD ANZSCO73 LBD014 LCD029 LDD029 LED029 LFD029 LGD029 LHD029 LID029
   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 00267          0      0      0      0      0      0      0      0      0
 2 00276         NA     NA      0      0      0      0      0      0      0
 3 00323         NA     NA     NA      0      0      0      0      1      1
 4 00360          0      0     NA      0      0      0      0      1      1
 5 00667          0      0      0      0     NA      0      0      0      0
 6 00734         NA     NA     NA     NA     NA     NA     NA      1      0
 7 00798          0      0      0      0      0      0      0      1      1
 8 00921          0      0     NA      0     NA     NA      1     NA      0
 9 00937          0      0      0      0      0      0      0      0      0
10 00965          0      0      0      0      0      0      0      1      1
# ℹ 111 more rows
# ℹ 3 more variables: LJD029 &lt;dbl&gt;, LKD029 &lt;dbl&gt;, legit_teachers &lt;lgl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Taking a look at what the legit teachers studied</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>teacher_jobs_2009 <span class="ot">&lt;-</span> LSAY2009[LSAY2009<span class="sc">$</span>STIDSTD <span class="sc">%in%</span> teachers_2009<span class="sc">$</span>STIDSTD, ]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># selecting student ID and area of study across the years</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'STIDSTD'</span>, <span class="st">'LBC089'</span>, <span class="st">'LCC088'</span>, <span class="st">'LDC088'</span>, <span class="st">'LEC088'</span>, <span class="st">'LFC088'</span>, <span class="st">'LGC088'</span>, <span class="st">'LHC088'</span>, <span class="st">'LIC088'</span>, <span class="st">'LJC088'</span>, <span class="st">'LKC088'</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>teacher_jobs_2009 <span class="ot">&lt;-</span> teacher_jobs_2009[, selected_columns]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>aos_2009 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Code =</span> <span class="fu">c</span>(<span class="dv">90701</span>, <span class="dv">70199</span>, <span class="dv">79999</span>, <span class="dv">90503</span>, <span class="dv">60501</span>, <span class="dv">70103</span>, <span class="dv">70105</span>, <span class="dv">61799</span>),</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Field =</span> <span class="fu">c</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Psychology"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education, n.e.c."</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Education, n.e.c. "</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Children's Services."</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pharmacy"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Primary"</span>,</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Teacher Education: Secondary"</span>,</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Rehabilitation Therapies, n.e.c."</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>aos_2009 <span class="ot">&lt;-</span> <span class="fu">kable</span>(aos_2009, <span class="at">caption =</span> <span class="st">"Field of Education Codes 2009"</span>, <span class="at">align =</span> <span class="st">"c"</span>, <span class="at">booktabs =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">row_spec</span>(<span class="dv">0</span>, <span class="at">background =</span> <span class="st">"orange"</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(<span class="dv">1</span>, <span class="at">bold =</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>aos_2009</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<div class="table-responsive">
<table class="table table-striped table-hover table-condensed table-sm small" data-quarto-postprocess="true">
<caption>Field of Education Codes 2009</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; color: white !important; background-color: orange !important;">Code</th>
<th data-quarto-table-cell-role="th" style="text-align: center; font-weight: bold; color: white !important; background-color: orange !important;">Field</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">90701</td>
<td style="text-align: center;">Psychology</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">70199</td>
<td style="text-align: center;">Teacher Education, n.e.c.</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">79999</td>
<td style="text-align: center;">Education, n.e.c.</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">90503</td>
<td style="text-align: center;">Children's Services.</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">60501</td>
<td style="text-align: center;">Pharmacy</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">70103</td>
<td style="text-align: center;">Teacher Education: Primary</td>
</tr>
<tr class="odd">
<td style="text-align: center; font-weight: bold;">70105</td>
<td style="text-align: center;">Teacher Education: Secondary</td>
</tr>
<tr class="even">
<td style="text-align: center; font-weight: bold;">61799</td>
<td style="text-align: center;">Rehabilitation Therapies, n.e.c.</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</div>
</section>
<section id="performance-of-2009-cohort" class="level3">
<h3 class="anchored" data-anchor-id="performance-of-2009-cohort">Performance of 2009 cohort</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting the unique teacher IDs</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>teacher_ids_2009 <span class="ot">&lt;-</span> teachers_2009<span class="sc">$</span>STIDSTD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a flag to distinguish between teachers and non-teachers</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>LSAY2009_teachflag <span class="ot">&lt;-</span> </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  LSAY2009 <span class="sc">|&gt;</span> </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="fu">if_else</span>(STIDSTD <span class="sc">%in%</span> teacher_ids_2009, T, F))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># using rrepest package to calculate mean and standard deviation</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>pisa2009_avg_and_mean <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2009_teachflag,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"std"</span>),<span class="st">"pv@math"</span>),</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"teacher"</span>),</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)),</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> T)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>pisa2009_avg_and_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-9f05a444{}.cl-9f02ff8c{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9f02ff96{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9f0416f6{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9f041700{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9f041701{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9f04170a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9f041e58{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e59{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e62{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e63{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e6c{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e6d{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e6e{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e76{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e77{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e78{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e79{width:0.498in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e80{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e81{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e8a{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e8b{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e8c{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e8d{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e94{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e95{width:0.498in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9f041e96{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-9f05a444"><thead><tr style="overflow-wrap:break-word;"><th rowspan="3" class="cl-9f041e58"><p class="cl-9f0416f6"><span class="cl-9f02ff8c">teacher</span></p></th><th colspan="4" class="cl-9f041e59"><p class="cl-9f041700"><span class="cl-9f02ff8c">pv@math</span></p></th></tr><tr style="overflow-wrap:break-word;"><th colspan="2" class="cl-9f041e6d"><p class="cl-9f041700"><span class="cl-9f02ff8c">mean</span></p></th><th colspan="2" class="cl-9f041e76"><p class="cl-9f041700"><span class="cl-9f02ff8c">std</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-9f041e78"><p class="cl-9f041700"><span class="cl-9f02ff8c">B</span></p></th><th class="cl-9f041e79"><p class="cl-9f041700"><span class="cl-9f02ff8c">SE</span></p></th><th class="cl-9f041e80"><p class="cl-9f041700"><span class="cl-9f02ff8c">B</span></p></th><th class="cl-9f041e79"><p class="cl-9f041700"><span class="cl-9f02ff8c">SE</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-9f041e81"><p class="cl-9f041701"><span class="cl-9f02ff96">FALSE</span></p></td><td class="cl-9f041e8a"><p class="cl-9f04170a"><span class="cl-9f02ff96">513.7</span></p></td><td class="cl-9f041e8b"><p class="cl-9f04170a"><span class="cl-9f02ff96">2.7</span></p></td><td class="cl-9f041e8c"><p class="cl-9f04170a"><span class="cl-9f02ff96">95.1</span></p></td><td class="cl-9f041e8b"><p class="cl-9f04170a"><span class="cl-9f02ff96">2.5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9f041e8d"><p class="cl-9f041701"><span class="cl-9f02ff96">TRUE</span></p></td><td class="cl-9f041e94"><p class="cl-9f04170a"><span class="cl-9f02ff96">552.7</span></p></td><td class="cl-9f041e95"><p class="cl-9f04170a"><span class="cl-9f02ff96">7.2</span></p></td><td class="cl-9f041e96"><p class="cl-9f04170a"><span class="cl-9f02ff96">63.9</span></p></td><td class="cl-9f041e95"><p class="cl-9f04170a"><span class="cl-9f02ff96">8.4</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># distinguishing between proficient and non-proficient for both groups</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>LSAY2009_proficiency <span class="ot">&lt;-</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  LSAY2009_teachflag <span class="sc">|&gt;</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(PV1MATH<span class="sc">:</span>PV5MATH,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">&gt;=</span> <span class="dv">482</span>, <span class="st">"Proficient"</span>, <span class="st">"Not proficient"</span>, <span class="at">missing =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"{col}proficient"</span>))</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># percentage above proficiency for both groups</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>LSAY2009_agprof <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2009_proficiency,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="st">"freq"</span>,<span class="st">"pv@mathproficient"</span>),</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="st">"teacher"</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)), </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="lsay-2015" class="level2">
<h2 class="anchored" data-anchor-id="lsay-2015">LSAY 2015</h2>
<section id="how-many-people-in-the-2015-cohort-studied-teaching" class="level3">
<h3 class="anchored" data-anchor-id="how-many-people-in-the-2015-cohort-studied-teaching">How many people in the 2015 cohort studied teaching?</h3>
<p>“What is your main area of study or training in this (apprenceship/traineeship/course)?” * LCC088, LDC088, LEC088, LFC088, LGC088, LHC088</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>studying_teachers_2015 <span class="ot">&lt;-</span> LSAY2015 <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># selecting variables for current area of study</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LSAYID, LCC088, LDC088, LEC088, LFC088, LGC088, LHC088) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation to replace 0 = not '70103', 1 = is '70103'</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LCC088, LDC088, LEC088, LFC088, LGC088, LHC088),</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'70103'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># Retain NA</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new column where any 1 in the row = TRUE, no 1 = FALSE</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unique_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LCC088, LDC088, LEC088, LFC088, LGC088, LHC088), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Keep TRUE values</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unique_teachers)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>studying_teachers_2015</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 8
   LSAYID LCC088 LDC088 LEC088 LFC088 LGC088 LHC088 unique_teachers
    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt;          
 1  25143     NA     NA     NA     NA      1     NA TRUE           
 2  25239     NA     NA      1     NA     NA     NA TRUE           
 3  25314     NA     NA     NA     NA     NA      1 TRUE           
 4  19492     NA     NA      1     NA     NA     NA TRUE           
 5  16115     NA     NA     NA     NA     NA      1 TRUE           
 6  15886     NA     NA      1     NA     NA     NA TRUE           
 7  14822     NA     NA     NA      1     NA     NA TRUE           
 8  21839     NA     NA     NA     NA      1     NA TRUE           
 9  15910      1     NA     NA     NA     NA     NA TRUE           
10  23628     NA     NA     NA     NA      1     NA TRUE           
# ℹ 14 more rows</code></pre>
</div>
</div>
</section>
<section id="how-many-teachers-in-the-2015-cohort" class="level3">
<h3 class="anchored" data-anchor-id="how-many-teachers-in-the-2015-cohort">How many teachers in the 2015 cohort?</h3>
<p>Looking for code <code>2412</code> in variables related to the question: “What kind of work do you do in this job?” LCD022, LDD022, LED022, LFD025, LGD022, LHD022</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>teacher_2015 <span class="ot">&lt;-</span> LSAY2015 <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecting variables for kind of work</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(LSAYID, LBEM004, LCD022, LDD022, LED022, LFD025, LGD022, LHD022) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mutate across the observation </span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LBEM004, LCD022, LDD022, LED022, LFD025, LGD022, LHD022),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">as.character</span>(.) <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># PSE as 1</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">is.na</span>(.) <span class="sc">~</span> <span class="cn">NA_integer_</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>  <span class="co"># All else as 0</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>                 ))) <span class="sc">%&gt;%</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># column for TRUE = legit teachers, FALSE = not teachers</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">legit_teachers =</span> <span class="fu">if_any</span>(<span class="fu">c</span>(LBEM004, LCD022, LDD022, LED022, LFD025, LGD022, LHD022), <span class="sc">~</span> . <span class="sc">==</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter for TRUE condition</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(legit_teachers)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>teacher_2015</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 31 × 9
   LSAYID LBEM004 LCD022 LDD022 LED022 LFD025 LGD022 LHD022 legit_teachers
    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt;         
 1  25045      NA     NA      0      0      0      0      1 TRUE          
 2  25239      NA      0      0      0      0      0      1 TRUE          
 3  25332      NA      0     NA      0      0      0      1 TRUE          
 4  25420      NA      0      0     NA      0     NA      1 TRUE          
 5  10287      NA     NA     NA      0      0      1      0 TRUE          
 6  20594       0      0      0     NA      0      0      1 TRUE          
 7  21108       0     NA      0      0      0      0      1 TRUE          
 8  14568       0      0      0      0      0      0      1 TRUE          
 9  18706       0      0      0      0      0      0      1 TRUE          
10  10845       0      0      0      0      0      0      1 TRUE          
# ℹ 21 more rows</code></pre>
</div>
</div>
</section>
<section id="what-did-these-teachers-study" class="level3">
<h3 class="anchored" data-anchor-id="what-did-these-teachers-study">What did these teachers study?</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting IDs of teachers in 2015 Cohort</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>teacher_jobs_2015 <span class="ot">&lt;-</span> LSAY2015[LSAY2015<span class="sc">$</span>LSAYID <span class="sc">%in%</span> teacher_2015<span class="sc">$</span>LSAYID, ]</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># selecting student ID and 'area of study' variables </span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'LSAYID'</span>, <span class="st">'LCC088'</span>, <span class="st">'LDC088'</span>, <span class="st">'LEC088'</span>, <span class="st">'LFC088'</span>, <span class="st">'LGC088'</span>, <span class="st">'LHC088'</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>teacher_jobs_2015 <span class="ot">&lt;-</span> teacher_jobs_2015[, selected_columns]</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>teacher_jobs_2015 <span class="sc">|&gt;</span> </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>LSAYID) <span class="sc">|&gt;</span> </span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">apply</span>(<span class="dv">2</span>, unique)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$LCC088
[1] NA

$LDC088
[1] NA

$LEC088
[1]    NA 70103

$LFC088
[1] NA

$LGC088
[1]    NA 70103

$LHC088
[1] NA</code></pre>
</div>
</div>
</section>
<section id="performance-of-2015-cohort" class="level3">
<h3 class="anchored" data-anchor-id="performance-of-2015-cohort">Performance of 2015 cohort</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extracting the unique teacher IDs</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>teacher_ids_2015 <span class="ot">&lt;-</span> teacher_2015<span class="sc">$</span>LSAYID</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a flag to distinguish between teachers and non-teachers</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>LSAY2015_teachflag <span class="ot">&lt;-</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  LSAY2015 <span class="sc">|&gt;</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="fu">if_else</span>(LSAYID <span class="sc">%in%</span> teacher_ids_2015, T, F))</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># rrepest package to calculate mean and standard deviation</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>pisa2015_avg_and_mean <span class="ot">&lt;-</span>  Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2015_teachflag,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"std"</span>),<span class="st">"pv@math"</span>),</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"teacher"</span>),</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fsturwt"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)),</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> T)</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>pisa2015_avg_and_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a90e356e{}.cl-a90b8b98{font-family:'Helvetica';font-size:11pt;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a90b8ba2{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a90ca83e{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a90ca848{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a90ca849{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a90ca84a{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a90cafa0{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafa1{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafaa{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafab{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafac{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafb4{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafb5{width:0.795in;background-color:rgba(217, 225, 242, 1.00);vertical-align: bottom;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafb6{width:0.668in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafb7{width:0.583in;background-color:rgba(217, 225, 242, 1.00);vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(102, 102, 102, 1.00);border-left: 0.5pt solid rgba(190, 190, 190, 1.00);border-right: 0.5pt solid rgba(190, 190, 190, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafbe{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafbf{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafc8{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 0.75pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafc9{width:0.795in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafca{width:0.668in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a90cafd2{width:0.583in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0.75pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a90e356e"><thead><tr style="overflow-wrap:break-word;"><th rowspan="3" class="cl-a90cafa0"><p class="cl-a90ca83e"><span class="cl-a90b8b98">teacher</span></p></th><th colspan="4" class="cl-a90cafa1"><p class="cl-a90ca848"><span class="cl-a90b8b98">pv@math</span></p></th></tr><tr style="overflow-wrap:break-word;"><th colspan="2" class="cl-a90cafac"><p class="cl-a90ca848"><span class="cl-a90b8b98">mean</span></p></th><th colspan="2" class="cl-a90cafb4"><p class="cl-a90ca848"><span class="cl-a90b8b98">std</span></p></th></tr><tr style="overflow-wrap:break-word;"><th class="cl-a90cafb6"><p class="cl-a90ca848"><span class="cl-a90b8b98">B</span></p></th><th class="cl-a90cafb7"><p class="cl-a90ca848"><span class="cl-a90b8b98">SE</span></p></th><th class="cl-a90cafb7"><p class="cl-a90ca848"><span class="cl-a90b8b98">B</span></p></th><th class="cl-a90cafb7"><p class="cl-a90ca848"><span class="cl-a90b8b98">SE</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a90cafbe"><p class="cl-a90ca849"><span class="cl-a90b8ba2">FALSE</span></p></td><td class="cl-a90cafbf"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">494.0</span></p></td><td class="cl-a90cafc8"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">1.8</span></p></td><td class="cl-a90cafc8"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">92.5</span></p></td><td class="cl-a90cafc8"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">0.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a90cafc9"><p class="cl-a90ca849"><span class="cl-a90b8ba2">TRUE</span></p></td><td class="cl-a90cafca"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">519.4</span></p></td><td class="cl-a90cafd2"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">20.2</span></p></td><td class="cl-a90cafd2"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">61.0</span></p></td><td class="cl-a90cafd2"><p class="cl-a90ca84a"><span class="cl-a90b8ba2">19.0</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># flag for proficient and not proficient</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>LSAY2015_proficiency <span class="ot">&lt;-</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  LSAY2015_teachflag <span class="sc">|&gt;</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(PV1MATH<span class="sc">:</span>PV5MATH,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">&gt;=</span> <span class="dv">482</span>, <span class="st">"Proficient"</span>, <span class="st">"Not proficient"</span>, <span class="at">missing =</span> <span class="cn">NA_character_</span>),</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"{col}proficient"</span>))</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># finding percentage and standard error of both groups proficient and non-proficient in math</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>LSAY2015_agprof <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(<span class="at">data =</span> LSAY2015_proficiency,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">est =</span> <span class="fu">est</span>(<span class="st">"freq"</span>,<span class="st">"pv@mathproficient"</span>),</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">by =</span> <span class="st">"teacher"</span>,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fsturwt"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)), </span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">tabl =</span> F)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>LSAY2015_agprof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 7
  teacher b.pv@mathproficient.No…¹ se.pv@mathproficient…² b.pv@mathproficient.…³
  &lt;chr&gt;                      &lt;dbl&gt;                  &lt;dbl&gt;                  &lt;dbl&gt;
1 FALSE                       44.3                   1.01                   55.7
2 TRUE                        24.6                  14.2                    75.4
# ℹ abbreviated names: ¹​`b.pv@mathproficient.Not proficient`,
#   ²​`se.pv@mathproficient.Not proficient`, ³​`b.pv@mathproficient.Proficient`
# ℹ 3 more variables: `se.pv@mathproficient.Proficient` &lt;dbl&gt;,
#   `b.pv@mathproficient.NA` &lt;dbl&gt;, `se.pv@mathproficient.NA` &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="creating-a-barplot-of-counts-of-teachers-in-each-year" class="level1">
<h1>creating a barplot of counts of teachers in each year</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a table to display the counts of teachers in each year</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>teacher_counts <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="dv">2003</span>, <span class="dv">2006</span>, <span class="dv">2009</span>, <span class="dv">2015</span>),</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Count =</span> <span class="fu">c</span>(<span class="fu">nrow</span>(unique_teachers_y03), <span class="fu">nrow</span>(teachers_2006), <span class="fu">nrow</span>(teachers_2009), <span class="fu">nrow</span>(teacher_2015)))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a barplot with ggplot for teacher_counts, 2003 at the top of the chart</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>teacher_count_plot <span class="ot">&lt;-</span> teacher_counts <span class="sc">|&gt;</span> </span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_relevel</span>(<span class="fu">factor</span>(Year), <span class="st">"2003"</span>, <span class="at">after =</span> <span class="dv">0</span>), <span class="at">y =</span> Count, <span class="at">fill =</span> <span class="fu">factor</span>(Year))) <span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers counts in 2015 are significantly disproportionate to other years"</span>,</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Count of Primary School Teachers in Each PISA Year"</span>,</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>teacher_count_plot <span class="sc">+</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>) <span class="sc">+</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="visualise-performance" class="level2">
<h2 class="anchored" data-anchor-id="visualise-performance">Visualise performance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>data_2006 <span class="ot">&lt;-</span> <span class="fu">pisa.per.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">data =</span> LSAY2006_teachflag, <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">per =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">75</span>, <span class="dv">90</span>))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>data_2006 <span class="ot">&lt;-</span> data_2006 <span class="sc">|&gt;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Percentiles =</span> Percentiles, <span class="at">Score =</span> Score, <span class="at">Std_err =</span> <span class="st">'Std. err.'</span>, <span class="at">teacher =</span> teacher)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>base_chart <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_2006, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(Percentiles), <span class="at">y =</span> Score, <span class="at">fill =</span> <span class="fu">as.factor</span>(teacher))) <span class="sc">+</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Score <span class="sc">-</span> Std_err, <span class="at">ymax =</span> Score <span class="sc">+</span> Std_err), </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>), <span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Scores at Different Percentiles by Teacher Status"</span>,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"PISA 2006 Math Scores for Teachers and Non-Teachers Across Percentiles"</span>,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Percentiles"</span>,</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Score"</span>,</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Teacher"</span>) <span class="sc">+</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>base_chart <span class="sc">+</span> </span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span>  <span class="st">"bar"</span>) <span class="sc">+</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2009</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>data_2009 <span class="ot">&lt;-</span> <span class="fu">pisa.per.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">data =</span> LSAY2009_teachflag, <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">per =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">75</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data_2009 <span class="ot">&lt;-</span> data_2009 <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Percentiles =</span> Percentiles, <span class="at">Score =</span> Score, <span class="at">Std_err =</span> <span class="st">'Std. err.'</span>, <span class="at">teacher =</span> teacher)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>base_chart_2009 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_2009, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(Percentiles), <span class="at">y =</span> Score, <span class="at">fill =</span> <span class="fu">as.factor</span>(teacher))) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Score <span class="sc">-</span> Std_err, <span class="at">ymax =</span> Score <span class="sc">+</span> Std_err), </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>), <span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Scores at Different Percentiles by Teacher Status"</span>,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"PISA 2009 Math Scores for Teachers and Non-Teachers Across Percentiles"</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Percentiles"</span>,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Score"</span>,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Teacher"</span>) <span class="sc">+</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>base_chart_2009 <span class="sc">+</span> </span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span>  <span class="st">"bar"</span>) <span class="sc">+</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quantiles for 2015</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>data_2015 <span class="ot">&lt;-</span> <span class="fu">pisa.per.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">"MATH"</span>), <span class="at">data =</span> LSAY2015_teachflag, <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">per =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">75</span>, <span class="dv">90</span>))</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">data =</span> LSAY2003_teachflag, <span class="at">by =</span> <span class="st">"teacher"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  teacher  Freq   Mean s.e.    SD  s.e
1   FALSE 10226 529.80 2.06 93.80 1.52
2    TRUE   144 549.55 5.87 65.14 3.96</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data_2015 <span class="ot">&lt;-</span> data_2015 <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Percentiles =</span> Percentiles, <span class="at">Score =</span> Score, <span class="at">Std_err =</span> <span class="st">'Std. err.'</span>, <span class="at">teacher =</span> teacher)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>base_chart_2015 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_2015, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(Percentiles), <span class="at">y =</span> Score, <span class="at">fill =</span> <span class="fu">as.factor</span>(teacher))) <span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> Score <span class="sc">-</span> Std_err, <span class="at">ymax =</span> Score <span class="sc">+</span> Std_err), </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="fl">0.9</span>), <span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Scores at Different Percentiles by Teacher Status"</span>,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"PISA 2015 Math Scores for Teachers and Non-Teachers Across Percentiles"</span>,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Percentiles"</span>,</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Score"</span>,</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Teacher"</span>) <span class="sc">+</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>base_chart_2015 <span class="sc">+</span> </span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span>  <span class="st">"bar"</span>) <span class="sc">+</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual t-test calculation for 2003</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>mean_FALSE <span class="ot">&lt;-</span> <span class="fl">530.3</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>mean_TRUE <span class="ot">&lt;-</span> <span class="fl">554.0</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>sd_FALSE <span class="ot">&lt;-</span> <span class="fl">92.9</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>sd_TRUE <span class="ot">&lt;-</span> <span class="fl">64.8</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>n_FALSE <span class="ot">&lt;-</span> <span class="dv">10226</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>n_TRUE <span class="ot">&lt;-</span> <span class="dv">144</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((<span class="fl">92.9</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">10226</span>) <span class="sc">+</span> (<span class="fl">64.8</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">144</span>)) <span class="co"># For Welch's t-test</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>t_value <span class="ot">&lt;-</span> (mean_FALSE <span class="sc">-</span> mean_TRUE) <span class="sc">/</span> se</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co"># approx dof</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> ( (sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE) <span class="sc">+</span> (sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE) )<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>      ( ((sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_FALSE <span class="sc">-</span> <span class="dv">1</span>)) <span class="sc">+</span> ((sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_TRUE <span class="sc">-</span> <span class="dv">1</span>)) )</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>p_value <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">pt</span>(t_value, <span class="at">df =</span> df, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.736183e-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>t_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -4.326722</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual t-test calculation for 2006</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#pisa.mean.pv(pvlabel = paste0("PV", 1:5, "MATH"), data = LSAY2006_teachflag, by = "teacher")</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>mean_FALSE <span class="ot">&lt;-</span> <span class="fl">518.6</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>mean_TRUE <span class="ot">&lt;-</span> <span class="fl">550.7</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>sd_FALSE <span class="ot">&lt;-</span> <span class="fl">87.9</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>sd_TRUE <span class="ot">&lt;-</span> <span class="fl">67.2</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>n_FALSE <span class="ot">&lt;-</span> <span class="dv">14054</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>n_TRUE <span class="ot">&lt;-</span> <span class="dv">116</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((<span class="fl">87.9</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">14054</span>) <span class="sc">+</span> (<span class="fl">67.2</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">116</span>)) <span class="co"># For Welch's t-test</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>t_value <span class="ot">&lt;-</span> (mean_FALSE <span class="sc">-</span> mean_TRUE) <span class="sc">/</span> se</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co"># approx dof - essentially 2 less than the total number of observations</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> ( (sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE) <span class="sc">+</span> (sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE) )<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>      ( ((sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_FALSE <span class="sc">-</span> <span class="dv">1</span>)) <span class="sc">+</span> ((sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_TRUE <span class="sc">-</span> <span class="dv">1</span>)) )</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>p_value <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">pt</span>(t_value, <span class="at">df =</span> df, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.258092e-06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>t_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -5.108809</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual t-test calculation for 2009</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="co">#pisa.mean.pv(pvlabel = paste0("PV", 1:5, "MATH"), data = LSAY2009_teachflag, by = "teacher")</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">#pisa2009_avg_and_mean</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>mean_FALSE <span class="ot">&lt;-</span> <span class="fl">513.7</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>mean_TRUE <span class="ot">&lt;-</span> <span class="fl">552.7</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>sd_FALSE <span class="ot">&lt;-</span> <span class="fl">95.1</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>sd_TRUE <span class="ot">&lt;-</span> <span class="fl">63.9</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>n_FALSE <span class="ot">&lt;-</span> <span class="dv">14130</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>n_TRUE <span class="ot">&lt;-</span> <span class="dv">121</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((<span class="fl">95.1</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">14130</span>) <span class="sc">+</span> (<span class="fl">63.9</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">121</span>)) <span class="co"># For Welch's t-test</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>t_value <span class="ot">&lt;-</span> (mean_FALSE <span class="sc">-</span> mean_TRUE) <span class="sc">/</span> se</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="co"># approx dof</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> ( (sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE) <span class="sc">+</span> (sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE) )<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>      ( ((sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_FALSE <span class="sc">-</span> <span class="dv">1</span>)) <span class="sc">+</span> ((sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_TRUE <span class="sc">-</span> <span class="dv">1</span>)) )</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>p_value <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">pt</span>(t_value, <span class="at">df =</span> df, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8.224439e-10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>t_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -6.650838</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Manual t-test calculation for 2015</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pisa.mean.pv(pvlabel = paste0("PV", 1:5, "MATH"), data = LSAY2015_teachflag, by = "teacher")</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>mean_FALSE <span class="ot">&lt;-</span> <span class="fl">494.0</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>mean_TRUE <span class="ot">&lt;-</span> <span class="fl">519.4</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>sd_FALSE <span class="ot">&lt;-</span> <span class="fl">92.5</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>sd_TRUE <span class="ot">&lt;-</span> <span class="fl">61.0</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>n_FALSE <span class="ot">&lt;-</span> <span class="dv">14503</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>n_TRUE <span class="ot">&lt;-</span> <span class="dv">27</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>se <span class="ot">&lt;-</span> <span class="fu">sqrt</span>((<span class="fl">92.5</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">14503</span>) <span class="sc">+</span> (<span class="fl">61.0</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> <span class="dv">27</span>)) <span class="co"># For Welch's t-test</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>t_value <span class="ot">&lt;-</span> (mean_FALSE <span class="sc">-</span> mean_TRUE) <span class="sc">/</span> se</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co"># approx dof</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> ( (sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE) <span class="sc">+</span> (sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE) )<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>      ( ((sd_FALSE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_FALSE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_FALSE <span class="sc">-</span> <span class="dv">1</span>)) <span class="sc">+</span> ((sd_TRUE<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> n_TRUE)<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (n_TRUE <span class="sc">-</span> <span class="dv">1</span>)) )</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co"># p-value</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>p_value <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">pt</span>(t_value, <span class="at">df =</span> df, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>)</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>p_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.04017306</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>t_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -2.159027</code></pre>
</div>
</div>
</section>
<section id="comparing-teacher-performance-with-other-professionals" class="level2">
<h2 class="anchored" data-anchor-id="comparing-teacher-performance-with-other-professionals">Comparing Teacher Performance with other Professionals</h2>
<p>Starting with 2003 first as it has the largest sample of teachers. looking at other professions at the end of the waves.</p>
<ul>
<li><p>medical practitioners,</p></li>
<li><p>midwifery and nursing professionals</p></li>
<li><p>legal professionals,</p></li>
<li><p>accounts auditors and company secretaries</p></li>
<li><p>engineering professionals</p></li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th>Professionals</th>
<th>ANSZCO Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Medical Practitioners</td>
<td>253</td>
</tr>
<tr class="even">
<td>Midwifery and Nursing Professionals</td>
<td>254</td>
</tr>
<tr class="odd">
<td>Legal professionals</td>
<td>271</td>
</tr>
<tr class="even">
<td>accounts auditors and company secretaries</td>
<td>221</td>
</tr>
<tr class="odd">
<td>Engineering professionals</td>
<td>233</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adapting the code earlier to see the frequency of each profession in the last wave</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>UNIQUE_PROFESSIONALS_Y03 <span class="ot">&lt;-</span> LSAY2003 <span class="sc">%&gt;%</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Selecting last wave variable related to question: 'What kind of work do you do?'</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(STIDSTD, LKD029) <span class="sc">%&gt;%</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(LKD029), as.character)) <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">profession =</span> <span class="fu">case_when</span>(</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    LKD029 <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># Teacher = 1</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'253'</span>)  <span class="sc">~</span> <span class="dv">2</span>,  <span class="co"># Medical Practitioners = 2</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'254'</span>)  <span class="sc">~</span> <span class="dv">3</span>,  <span class="co"># Midwifery and Nursing Professionals = 3</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'271'</span>)  <span class="sc">~</span> <span class="dv">4</span>,  <span class="co"># Legal Professionals = 4</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'221'</span>)  <span class="sc">~</span> <span class="dv">5</span>,  <span class="co"># Accounts Auditors and Company Secretaries = 5</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'233'</span>)  <span class="sc">~</span> <span class="dv">6</span>,  <span class="co"># Engineering Professionals = 6</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(LKD029) <span class="sc">~</span> <span class="cn">NA_integer_</span>, <span class="co"># NA values retained</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span> <span class="co"># All others = 0</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># keeping 1:6 professions</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(profession <span class="sc">!=</span> <span class="dv">0</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(profession))</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a><span class="co"># frequency of each profession</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>profession_frequency <span class="ot">&lt;-</span> UNIQUE_PROFESSIONALS_Y03 <span class="sc">%&gt;%</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(profession) <span class="sc">%&gt;%</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Profession =</span> <span class="fu">case_when</span>(</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">'Teacher'</span>,</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">'Medical Practitioners'</span>,</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">'Midwifery and Nursing Professionals'</span>,</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">'Legal Professionals'</span>,</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">'Accounts Auditors and Company Secretaries'</span>,</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>      profession <span class="sc">==</span> <span class="dv">6</span> <span class="sc">~</span> <span class="st">'Engineering Professionals'</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>profession_frequency</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  profession     n Profession                               
       &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;                                    
1          1    82 Teacher                                  
2          2    48 Medical Practitioners                    
3          3    94 Midwifery and Nursing Professionals      
4          4    50 Legal Professionals                      
5          5    92 Accounts Auditors and Company Secretaries
6          6    88 Engineering Professionals                </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adapting the code to include different professions</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>LSAY2003_profession_flag <span class="ot">&lt;-</span> LSAY2003 <span class="sc">%&gt;%</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">LKD029 =</span> <span class="fu">as.character</span>(LKD029)) <span class="sc">%&gt;%</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">profession =</span> <span class="fu">case_when</span>(</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    LKD029 <span class="sc">==</span> <span class="st">'2412'</span> <span class="sc">~</span> <span class="st">'Teacher'</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'253'</span>) <span class="sc">~</span> <span class="st">'Medical Practitioners'</span>,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'254'</span>) <span class="sc">~</span> <span class="st">'Midwifery and Nursing Professionals'</span>,</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'271'</span>) <span class="sc">~</span> <span class="st">'Legal Professionals'</span>,</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'221'</span>) <span class="sc">~</span> <span class="st">'Accounts Auditors and Company Secretaries'</span>,</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">startsWith</span>(LKD029, <span class="st">'233'</span>) <span class="sc">~</span> <span class="st">'Engineering Professionals'</span>,</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">'Other'</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>professionals <span class="ot">&lt;-</span> Rrepest<span class="sc">::</span><span class="fu">Rrepest</span>(</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> LSAY2003_profession_flag,</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">svy =</span> <span class="st">"PISA"</span>,</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">est =</span> <span class="fu">est</span>(<span class="fu">c</span>(<span class="st">"mean"</span>,<span class="st">"std"</span>),<span class="st">"pv@math"</span>),</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"profession"</span>),</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">cm.weights =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="st">"w_fstr"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">80</span>)),</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">tabl =</span> <span class="cn">FALSE</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>professionals_vis <span class="ot">&lt;-</span> professionals <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Profession =</span> profession,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean_Math =</span> <span class="st">`</span><span class="at">b.mean.pv@math</span><span class="st">`</span>,</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">SE_Mean_Math =</span> <span class="st">`</span><span class="at">se.mean.pv@math</span><span class="st">`</span>,</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Std_Math =</span> <span class="st">`</span><span class="at">b.std.pv@math</span><span class="st">`</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">SE_Std_Math =</span> <span class="st">`</span><span class="at">se.std.pv@math</span><span class="st">`</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Profession =</span> <span class="fu">str_wrap</span>(Profession,<span class="dv">30</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Mean_Math) <span class="sc">%&gt;%</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Profession =</span> <span class="fu">factor</span>(Profession, <span class="at">levels =</span> <span class="fu">unique</span>(Profession)),</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">upper_ci_90 =</span> Mean_Math <span class="sc">+</span> <span class="fl">1.64</span> <span class="sc">*</span> SE_Mean_Math,</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">lower_ci_90 =</span> Mean_Math <span class="sc">-</span> <span class="fl">1.64</span> <span class="sc">*</span> SE_Mean_Math) <span class="co"># Reorder Profession factor</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>profession_visualisation <span class="ot">&lt;-</span> professionals_vis <span class="sc">%&gt;%</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> Profession, </span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> Mean_Math,</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">xmin =</span> lower_ci_90,</span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">xmax =</span> upper_ci_90)) <span class="sc">+</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_pointinterval</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>                     <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>                     <span class="at">stroke =</span> <span class="fl">1.5</span>,</span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>                     <span class="at">colour =</span> grattan_orange,</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>                     <span class="at">linewidth =</span> <span class="fl">4.5</span>, </span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>                     <span class="at">interval_size_domain =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="fl">4.5</span>)) <span class="sc">+</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> <span class="st">"Teachers at 15 years-old were less likely to be proficient in math compared to other professionals"</span>,</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Average PISA 2003 Maths scores for teachers and other professionals, with 90 per cent confident intervals"</span>),</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Score"</span>,</span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Teacher"</span>,</span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: Longitudinal Surveys of Australian Youth, 2003 cohort (Version 7.1)"</span></span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">y =</span> <span class="fl">5.5</span>, <span class="at">x =</span> <span class="dv">475</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>, <span class="at">label =</span> <span class="st">"Proficiency</span><span class="sc">\n</span><span class="st">benchmark"</span>, <span class="at">size =</span> <span class="dv">18</span><span class="sc">/</span>.pt) <span class="sc">+</span> </span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">450</span>, <span class="dv">700</span>) <span class="sc">+</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">flipped =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="at">n =</span> <span class="dv">1</span>, <span class="at">faded_level=</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey80"</span>))</span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a><span class="co"># check_chart_aspect_ratio(profession_visualisation, type = "fullslide")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>https://scc.ms.unimelb.edu.au/resources/graphs-for-statistical-analysis/graphs * how to show standard error/explain simply</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">#70th percentile</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pisa.per.pv</span>(<span class="at">pvlabel=</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="st">"MATH"</span>),</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="at">per=</span><span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">70</span>, <span class="dv">90</span>), <span class="at">data=</span> LSAY2003)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Percentiles  Score Std. err.
1          10 407.27      2.67
2          25 465.90      2.46
3          70 582.26      2.50
4          90 648.61      3.00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finding how many teachers are above the 70th percentile: '582.26'</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pisa.ben.pv</span>(<span class="at">pvlabel=</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="st">"MATH"</span>), <span class="at">cutoff=</span><span class="fl">582.26</span>, <span class="at">by=</span><span class="st">"teacher"</span>, <span class="at">data=</span>LSAY2003_teachflag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  teacher          Benchmark Percentage Std. err.
1   FALSE At or above 582.26      30.06      0.95
2    TRUE At or above 582.26      31.91      5.80</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trying out different visualisations</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Seeing if we can get some standard deviations in</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 2003 Visualisations (To replace boxplots/barcharts)</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>visualisation_2003 <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">data =</span> LSAY2003_teachflag)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(visualisation_2003)[<span class="fu">which</span>(<span class="fu">names</span>(visualisation_2003) <span class="sc">==</span> <span class="st">"s.e"</span>)[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="st">"SD_s.e"</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>distributions_2003 <span class="ot">&lt;-</span> visualisation_2003 <span class="sc">|&gt;</span> </span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span> teacher, <span class="at">xdist =</span> <span class="fu">dist_normal</span>(Mean, SD))) <span class="sc">+</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_halfeye</span>(<span class="at">.width =</span> <span class="fl">0.9</span>,</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> grattan_orange,</span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">point_fill =</span> <span class="st">"white"</span>,</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>(<span class="at">data =</span> <span class="fu">subset</span>(LSAY2003_teachflag, teacher <span class="sc">==</span> T) , </span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>           <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">rowMeans</span>(</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>             <span class="co"># We should not average PVs at the student level, but this nevertheless gives us a sense of teachers' scores</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>             <span class="fu">cbind</span>(PV1MATH, PV2MATH, PV3MATH, PV4MATH, PV5MATH)</span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>             )</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>             ),</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>           <span class="at">inherit.aes =</span> F) <span class="sc">+</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers at 15 years-old were slightly more likely to be proficient in math compared to the general population"</span>,</span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Modelled distribution of PISA 2003 Mathematical Proficiency scores for teachers and non-teachers"</span>),</span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Score"</span>,</span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Notes: Assumes a normal distribution of teacher scores. Source: Longitudinal Surveys of Australian Youth, 2003 cohort (Version 7.1)"</span>) <span class="sc">+</span></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">y =</span> <span class="fl">0.75</span>, <span class="at">x =</span> <span class="dv">475</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>, <span class="at">label =</span> <span class="st">"Proficiency benchmark"</span>) <span class="sc">+</span></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Teacher"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"Non-Teacher"</span>))</span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a><span class="co"># combined_label &lt;- glue("</span></span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a><span class="co">#   Mean SE (Teachers): {round(visualisation_2003$s.e[visualisation_2003$teacher == TRUE], 2)}\n</span></span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a><span class="co">#   SD SE (Teachers): {round(visualisation_2003$SD_s.e[visualisation_2003$teacher == TRUE], 2)}\n</span></span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a><span class="co">#   Mean SE (Non-Teachers): {round(visualisation_2003$s.e[visualisation_2003$teacher == FALSE], 2)}\n</span></span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a><span class="co">#   SD SE (Non-Teachers): {round(visualisation_2003$SD_s.e[visualisation_2003$teacher == FALSE], 2)}</span></span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a><span class="co"># ")</span></span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the combined label as a single annotation</span></span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a><span class="co"># distributions_2003 &lt;- distributions_2003 +</span></span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a><span class="co">#   annotate(geom = "label", x = 650, y = 0.62, size = 2.8, color = "black", label = combined_label, hjust = 0, fill = "burlywood1")</span></span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a>teacher_non_teacher_distributions_2003 <span class="ot">&lt;-</span>  distributions_2003 <span class="sc">+</span></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>, <span class="at">flipped =</span> T) <span class="sc">+</span></span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">lineheight =</span> <span class="fl">1.1</span>), <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">3</span>, <span class="at">faded_level =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey80"</span>))</span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a>teacher_non_teacher_distributions_2003</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check_chart_aspect_ratio()</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="co">#grattan_save_pptx(filename = "atlas/StatInterval_Plot2003.pptx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2006 Visualisations (To replace boxplots/barcharts)</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>visualisation_2006 <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">data =</span> LSAY2006_teachflag)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(visualisation_2006)[<span class="fu">which</span>(<span class="fu">names</span>(visualisation_2006) <span class="sc">==</span> <span class="st">"s.e"</span>)[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="st">"SD_s.e"</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>distributions_2006 <span class="ot">&lt;-</span> visualisation_2006 <span class="sc">|&gt;</span> </span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span> teacher, <span class="at">xdist =</span> <span class="fu">dist_normal</span>(Mean, SD))) <span class="sc">+</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_interval</span>() <span class="sc">+</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Mean), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers at 15 years-old were slightly more likely to be proficient in math compared to the general population"</span>,</span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Distribution of {colour_text('#FF0000','Pisa 2006')} Mathematical Proficiency scores for teachers and non-teachers"</span>),</span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Score"</span>,</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Teacher"</span>,</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Source: Longitudinal Surveys of Australian Youth, 2006 cohort (Version 7.1)"</span>) <span class="sc">+</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">y =</span> <span class="fl">1.5</span>, <span class="at">x =</span> <span class="dv">475</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>, <span class="at">label =</span> <span class="st">"Proficiency benchmark"</span>) <span class="sc">+</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Teacher"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"Non-Teacher"</span>))  <span class="sc">+</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">xlim</span>(<span class="dv">300</span>, <span class="dv">750</span>)</span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>combined_label <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"</span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Teachers): {round(visualisation_2006$s.e[visualisation_2006$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Teachers): {round(visualisation_2006$SD_s.e[visualisation_2006$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Non-Teachers): {round(visualisation_2006$s.e[visualisation_2006$teacher == FALSE], 2)}</span><span class="sc">\n</span></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Non-Teachers): {round(visualisation_2006$SD_s.e[visualisation_2006$teacher == FALSE], 2)}</span></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>)</span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the combined label as a single annotation</span></span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a>distributions_2006 <span class="ot">&lt;-</span> distributions_2006 <span class="sc">+</span></span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="dv">650</span>, <span class="at">y =</span> <span class="fl">0.62</span>, <span class="at">size =</span> <span class="fl">2.8</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">label =</span> combined_label, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">fill =</span> <span class="st">"burlywood1"</span>)</span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-32"><a href="#cb75-32" aria-hidden="true" tabindex="-1"></a> distributions_2006 <span class="sc">+</span></span>
<span id="cb75-33"><a href="#cb75-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>, <span class="at">flipped =</span> T) <span class="sc">+</span></span>
<span id="cb75-34"><a href="#cb75-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">lineheight =</span> <span class="fl">1.1</span>), <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb75-35"><a href="#cb75-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">3</span>, <span class="at">faded_level =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb75-36"><a href="#cb75-36" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey80"</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grattan_save_pptx(filename = "atlas/StatInterval_Plot2006.pptx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2009 Visualisations (To replace boxplots/barcharts)</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>visualisation_2009 <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">data =</span> LSAY2009_teachflag)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(visualisation_2009)[<span class="fu">which</span>(<span class="fu">names</span>(visualisation_2009) <span class="sc">==</span> <span class="st">"s.e"</span>)[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="st">"SD_s.e"</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>distributions_2009 <span class="ot">&lt;-</span> visualisation_2009 <span class="sc">|&gt;</span> </span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span> teacher, <span class="at">xdist =</span> <span class="fu">dist_normal</span>(Mean, SD))) <span class="sc">+</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_interval</span>() <span class="sc">+</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Mean), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers at 15 years-old were slightly more likely to be proficient in math compared to the general population"</span>,</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Distribution of {colour_text('#FF0000','PISA 2009')} Mathematical Proficiency scores for teachers and non-teachers"</span>),</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Score"</span>,</span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Teacher"</span>,</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Source: Longitudinal Surveys of Australian Youth, 2009 cohort (Version 7.1)"</span>) <span class="sc">+</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">y =</span> <span class="fl">1.5</span>, <span class="at">x =</span> <span class="dv">475</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>, <span class="at">label =</span> <span class="st">"Proficiency benchmark"</span>) <span class="sc">+</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Teacher"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"Non-Teacher"</span>))  <span class="sc">+</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>   <span class="fu">xlim</span>(<span class="dv">300</span>, <span class="dv">750</span>)</span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>combined_label <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"</span></span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Teachers): {round(visualisation_2009$s.e[visualisation_2009$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Teachers): {round(visualisation_2009$SD_s.e[visualisation_2009$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Non-Teachers): {round(visualisation_2009$s.e[visualisation_2009$teacher == FALSE], 2)}</span><span class="sc">\n</span></span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Non-Teachers): {round(visualisation_2009$SD_s.e[visualisation_2009$teacher == FALSE], 2)}</span></span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>)</span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the combined label as a single annotation</span></span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a>distributions_2009 <span class="ot">&lt;-</span> distributions_2009 <span class="sc">+</span></span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="dv">650</span>, <span class="at">y =</span> <span class="fl">0.62</span>, <span class="at">size =</span> <span class="fl">2.8</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">label =</span> combined_label, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">fill =</span> <span class="st">"burlywood1"</span>)</span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a> distributions_2009 <span class="sc">+</span></span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>, <span class="at">flipped =</span> T) <span class="sc">+</span></span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">lineheight =</span> <span class="fl">1.1</span>), <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">3</span>, <span class="at">faded_level =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey80"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grattan_save_pptx(filename = "atlas/StatInterval_Plot2009.pptx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>visualisation_2015 <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">"MATH"</span>), <span class="at">by =</span> <span class="st">"teacher"</span>, <span class="at">data =</span> LSAY2015_teachflag)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(visualisation_2015)[<span class="fu">which</span>(<span class="fu">names</span>(visualisation_2015) <span class="sc">==</span> <span class="st">"s.e"</span>)[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="st">"SD_s.e"</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>distributions_2015 <span class="ot">&lt;-</span> visualisation_2015 <span class="sc">|&gt;</span> </span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span> teacher, <span class="at">xdist =</span> <span class="fu">dist_normal</span>(Mean, SD))) <span class="sc">+</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_interval</span>() <span class="sc">+</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> Mean), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers at 15 years-old were slightly more likely to be proficient in math compared to the general population"</span>,</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Distribution of {colour_text('#FF0000','PISA 2015')} Mathematical Proficiency scores for teachers and non-teachers"</span>),</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Score"</span>,</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Teacher"</span>,</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">"Source: Longitudinal Surveys of Australian Youth, 2015 cohort (Version 7.1)"</span>) <span class="sc">+</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">482</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">y =</span> <span class="fl">1.5</span>, <span class="at">x =</span> <span class="dv">475</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>, <span class="at">label =</span> <span class="st">"Proficiency benchmark"</span>) <span class="sc">+</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_y_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"TRUE"</span> <span class="ot">=</span> <span class="st">"Teacher"</span>, <span class="st">"FALSE"</span> <span class="ot">=</span> <span class="st">"Non-Teacher"</span>)) <span class="sc">+</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>   <span class="fu">xlim</span>(<span class="dv">300</span>, <span class="dv">750</span>)</span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>combined_label <span class="ot">&lt;-</span> <span class="fu">glue</span>(<span class="st">"</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Teachers): {round(visualisation_2015$s.e[visualisation_2015$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Teachers): {round(visualisation_2015$SD_s.e[visualisation_2015$teacher == TRUE], 2)}</span><span class="sc">\n</span></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a><span class="st">  Mean SE (Non-Teachers): {round(visualisation_2015$s.e[visualisation_2015$teacher == FALSE], 2)}</span><span class="sc">\n</span></span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a><span class="st">  SD SE (Non-Teachers): {round(visualisation_2015$SD_s.e[visualisation_2015$teacher == FALSE], 2)}</span></span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>)</span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the combined label as a single annotation</span></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>distributions_2015 <span class="ot">&lt;-</span> distributions_2015 <span class="sc">+</span></span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="dv">650</span>, <span class="at">y =</span> <span class="fl">0.62</span>, <span class="at">size =</span> <span class="fl">2.8</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">label =</span> combined_label, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">fill =</span> <span class="st">"burlywood1"</span>)</span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a> distributions_2015 <span class="sc">+</span></span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>, <span class="at">flipped =</span> T) <span class="sc">+</span></span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>(<span class="at">lineheight =</span> <span class="fl">1.1</span>), <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">3</span>, <span class="at">faded_level =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey80"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># grattan_save_pptx(filename = "atlas/StatInterval_Plot2015.pptx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="weighted-average-across-the-years" class="level1">
<h1>WEIGHTED AVERAGE ACROSS THE YEARS</h1>
<p>Get the aggregate percentage of teachers who are proficient overtime. Nice to have: Compare this to all non-teachers and other professionals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adding years to the df</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>LSAY2003_agprof <span class="ot">&lt;-</span> LSAY2003_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2003</span>)</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>LSAY2006_agprof <span class="ot">&lt;-</span> LSAY2006_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2006</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>LSAY2009_agprof <span class="ot">&lt;-</span> LSAY2009_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2009</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>LSAY2015_agprof <span class="ot">&lt;-</span> LSAY2015_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="dv">2015</span>)</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co">#joining all these dataframes together</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>LSAY_agprof <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(LSAY2003_agprof, LSAY2006_agprof, LSAY2009_agprof, LSAY2015_agprof)</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="co">#dropping last two columns</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>LSAY_agprof <span class="ot">&lt;-</span> LSAY_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">"b.pv@mathproficient.NA"</span>, <span class="st">"se.pv@mathproficient.NA"</span>))</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a><span class="co"># rearranging so year column is at the start</span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>LSAY_agprof <span class="ot">&lt;-</span> LSAY_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, <span class="fu">everything</span>())</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a><span class="co"># getting all the n_teachers</span></span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>n_teachers_2003 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2003_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>n_teachers_2006 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2006_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>n_teachers_2009 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2009_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>n_teachers_2015 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2015_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a><span class="co"># non-teachers</span></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a>n_normal_2003 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2003_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>n_normal_2006 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2006_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a>n_normal_2009 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2009_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>n_normal_2015 <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY2015_teachflag<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a><span class="co"># finding weighted average of proficient teacher = TRUE</span></span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>LSAY_agprof_t <span class="ot">&lt;-</span> LSAY_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(teacher <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-36"><a href="#cb81-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding a column for n = teachers 'n_teachers_2003' for each year</span></span>
<span id="cb81-37"><a href="#cb81-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_teachers =</span> <span class="fu">case_when</span>(</span>
<span id="cb81-38"><a href="#cb81-38" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2003</span> <span class="sc">~</span> n_teachers_2003,</span>
<span id="cb81-39"><a href="#cb81-39" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2006</span> <span class="sc">~</span> n_teachers_2006,</span>
<span id="cb81-40"><a href="#cb81-40" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2009</span> <span class="sc">~</span> n_teachers_2009,</span>
<span id="cb81-41"><a href="#cb81-41" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2015</span> <span class="sc">~</span> n_teachers_2015</span>
<span id="cb81-42"><a href="#cb81-42" aria-hidden="true" tabindex="-1"></a>  )) </span>
<span id="cb81-43"><a href="#cb81-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-44"><a href="#cb81-44" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a weighted average proficiency for each year</span></span>
<span id="cb81-45"><a href="#cb81-45" aria-hidden="true" tabindex="-1"></a><span class="co"># getting sum of all teacher samples</span></span>
<span id="cb81-46"><a href="#cb81-46" aria-hidden="true" tabindex="-1"></a>total_teachers <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY_agprof_t<span class="sc">$</span>n_teachers)</span>
<span id="cb81-47"><a href="#cb81-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-48"><a href="#cb81-48" aria-hidden="true" tabindex="-1"></a>LSAY_agprof_t <span class="ot">&lt;-</span> LSAY_agprof_t <span class="sc">%&gt;%</span></span>
<span id="cb81-49"><a href="#cb81-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weighted_prof =</span> (<span class="st">`</span><span class="at">b.pv@mathproficient.Proficient</span><span class="st">`</span> <span class="sc">*</span> n_teachers) <span class="sc">/</span> total_teachers)</span>
<span id="cb81-50"><a href="#cb81-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-51"><a href="#cb81-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-52"><a href="#cb81-52" aria-hidden="true" tabindex="-1"></a>LSAY_agprof_nt <span class="ot">&lt;-</span> LSAY_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-53"><a href="#cb81-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(teacher <span class="sc">==</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-54"><a href="#cb81-54" aria-hidden="true" tabindex="-1"></a>  <span class="co">#adding a column for n = teachers 'n_teachers_2003' for each year</span></span>
<span id="cb81-55"><a href="#cb81-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_normal =</span> <span class="fu">case_when</span>(</span>
<span id="cb81-56"><a href="#cb81-56" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2003</span> <span class="sc">~</span> n_normal_2003,</span>
<span id="cb81-57"><a href="#cb81-57" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2006</span> <span class="sc">~</span> n_normal_2006,</span>
<span id="cb81-58"><a href="#cb81-58" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2009</span> <span class="sc">~</span> n_normal_2009,</span>
<span id="cb81-59"><a href="#cb81-59" aria-hidden="true" tabindex="-1"></a>    Year <span class="sc">==</span> <span class="dv">2015</span> <span class="sc">~</span> n_normal_2015</span>
<span id="cb81-60"><a href="#cb81-60" aria-hidden="true" tabindex="-1"></a>  )) </span>
<span id="cb81-61"><a href="#cb81-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-62"><a href="#cb81-62" aria-hidden="true" tabindex="-1"></a>total_non_teachers <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY_agprof_nt<span class="sc">$</span>n_normal)</span>
<span id="cb81-63"><a href="#cb81-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-64"><a href="#cb81-64" aria-hidden="true" tabindex="-1"></a>LSAY_agprof_nt <span class="ot">&lt;-</span> LSAY_agprof_nt <span class="sc">%&gt;%</span></span>
<span id="cb81-65"><a href="#cb81-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weighted_prof =</span> (<span class="st">`</span><span class="at">b.pv@mathproficient.Proficient</span><span class="st">`</span> <span class="sc">*</span> n_normal) <span class="sc">/</span> total_non_teachers)</span>
<span id="cb81-66"><a href="#cb81-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-67"><a href="#cb81-67" aria-hidden="true" tabindex="-1"></a>total_proficient_nt <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY_agprof_nt<span class="sc">$</span>weighted_prof)</span>
<span id="cb81-68"><a href="#cb81-68" aria-hidden="true" tabindex="-1"></a>total_proficient_t <span class="ot">&lt;-</span> <span class="fu">sum</span>(LSAY_agprof_t<span class="sc">$</span>weighted_prof)</span>
<span id="cb81-69"><a href="#cb81-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-70"><a href="#cb81-70" aria-hidden="true" tabindex="-1"></a><span class="co"># creating a bar chat for the weighted average proficiency over time for teacher vs non-teacher</span></span>
<span id="cb81-71"><a href="#cb81-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-72"><a href="#cb81-72" aria-hidden="true" tabindex="-1"></a>t_nt_agprof <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(LSAY_agprof_t, LSAY_agprof_nt)</span>
<span id="cb81-73"><a href="#cb81-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-74"><a href="#cb81-74" aria-hidden="true" tabindex="-1"></a>total_weighted_prof <span class="ot">&lt;-</span> t_nt_agprof <span class="sc">%&gt;%</span></span>
<span id="cb81-75"><a href="#cb81-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(teacher) <span class="sc">%&gt;%</span></span>
<span id="cb81-76"><a href="#cb81-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_weighted_prof =</span> <span class="fu">sum</span>(weighted_prof, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb81-77"><a href="#cb81-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-78"><a href="#cb81-78" aria-hidden="true" tabindex="-1"></a><span class="co"># changing TRUE, FALSE to TEACHER and NON-TEACHER</span></span>
<span id="cb81-79"><a href="#cb81-79" aria-hidden="true" tabindex="-1"></a>total_weighted_prof<span class="sc">$</span>teacher <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(total_weighted_prof<span class="sc">$</span>teacher <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="st">"Teacher"</span>, <span class="st">"Non-Teacher"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Proficient / non-proficient chart for teachers, non teachers and professionals - bar chart - ONLY FOR PROFICIENT/MEETING PROFICIENCY</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>total_agg_prof <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(total_weighted_prof, <span class="fu">aes</span>(<span class="at">x =</span> teacher, <span class="at">y =</span> total_weighted_prof, <span class="at">fill =</span> teacher)) <span class="sc">+</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">width =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Teachers tend to have higher proficiency in mathematics compared to non-teachers over time"</span>,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Weighted average proficiency in PISA mathematics for teachers and non-teachers over time"</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Teacher"</span>, <span class="at">y =</span> <span class="st">"Percentage Weighted Proficiency"</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Source: Longitudinal Surveys of Australian Youth: 2003, 2006, 2009 and 2015 Cohort"</span>) <span class="sc">+</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() </span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>total_agg_prof <span class="ot">&lt;-</span> total_agg_prof <span class="sc">+</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"bar"</span>,</span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipped =</span> T) <span class="sc">+</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>(<span class="at">labels =</span> <span class="sc">~</span> <span class="fu">percent</span>(.x<span class="sc">/</span><span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_colour_manual</span>(<span class="dv">2</span>)</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>total_agg_prof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>box plot with aggregated data, 10th and 90th percentiles for boxplots: Refer to top of the picture for the prefered data frame.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>boxplot_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(data, year, is_teacher) {</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  filtered_data <span class="ot">&lt;-</span> data[data<span class="sc">$</span>teacher <span class="sc">==</span> is_teacher, ]</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  boxplot_data <span class="ot">&lt;-</span> <span class="fu">pisa.per.pv</span>(</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pvlabel =</span> <span class="fu">paste0</span>(<span class="st">"PV"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"MATH"</span>), </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">per =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">90</span>), </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> filtered_data</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>  Q1 <span class="ot">&lt;-</span> boxplot_data<span class="sc">$</span>Score[boxplot_data<span class="sc">$</span>Percentiles <span class="sc">==</span> <span class="dv">25</span>]</span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>  Q2 <span class="ot">&lt;-</span> boxplot_data<span class="sc">$</span>Score[boxplot_data<span class="sc">$</span>Percentiles <span class="sc">==</span> <span class="dv">50</span>]</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>  Q3 <span class="ot">&lt;-</span> boxplot_data<span class="sc">$</span>Score[boxplot_data<span class="sc">$</span>Percentiles <span class="sc">==</span> <span class="dv">75</span>]</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>  IQR <span class="ot">&lt;-</span> Q3 <span class="sc">-</span> Q1</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calc whiskers</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>  lower_whisker <span class="ot">&lt;-</span> boxplot_data<span class="sc">$</span>Score[boxplot_data<span class="sc">$</span>Percentiles <span class="sc">==</span> <span class="dv">10</span>]</span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>  upper_whisker <span class="ot">&lt;-</span> boxplot_data<span class="sc">$</span>Score[boxplot_data<span class="sc">$</span>Percentiles <span class="sc">==</span> <span class="dv">90</span>]</span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating df from summary stats</span></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>  boxplot_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> year,</span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">Q1 =</span> Q1,</span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">Q2 =</span> Q2,</span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Q3 =</span> Q3,</span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">IQR =</span> IQR,</span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">Upper_whisker =</span> upper_whisker,</span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">Lower_whisker =</span> lower_whisker</span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(boxplot_summary)</span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true" tabindex="-1"></a><span class="co"># For teachers</span></span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true" tabindex="-1"></a>boxplot_2003_teachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2003_teachflag, <span class="dv">2003</span>, <span class="cn">TRUE</span>)</span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true" tabindex="-1"></a>boxplot_2006_teachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2006_teachflag, <span class="dv">2006</span>, <span class="cn">TRUE</span>)</span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true" tabindex="-1"></a>boxplot_2009_teachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2009_teachflag, <span class="dv">2009</span>, <span class="cn">TRUE</span>)</span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true" tabindex="-1"></a>boxplot_2015_teachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2015_teachflag, <span class="dv">2015</span>, <span class="cn">TRUE</span>)</span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true" tabindex="-1"></a><span class="co"># binding together and adding column TEACHER</span></span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true" tabindex="-1"></a>pisa_boxplot_stats <span class="ot">&lt;-</span> <span class="fu">rbind</span>(boxplot_2003_teachers, boxplot_2006_teachers, boxplot_2009_teachers, boxplot_2015_teachers) <span class="sc">%&gt;%</span></span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true" tabindex="-1"></a><span class="co"># For non-teachers</span></span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true" tabindex="-1"></a>boxplot_2003_nonteachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2003_teachflag, <span class="dv">2003</span>, <span class="cn">FALSE</span>)</span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true" tabindex="-1"></a>boxplot_2006_nonteachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2006_teachflag, <span class="dv">2006</span>, <span class="cn">FALSE</span>)</span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true" tabindex="-1"></a>boxplot_2009_nonteachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2009_teachflag, <span class="dv">2009</span>, <span class="cn">FALSE</span>)</span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true" tabindex="-1"></a>boxplot_2015_nonteachers <span class="ot">&lt;-</span> <span class="fu">boxplot_stats</span>(LSAY2015_teachflag, <span class="dv">2015</span>, <span class="cn">FALSE</span>)</span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true" tabindex="-1"></a><span class="co"># binding together and adding column TEACHER = FALSE</span></span>
<span id="cb83-49"><a href="#cb83-49" aria-hidden="true" tabindex="-1"></a>pisa_boxplot_stats_nt <span class="ot">&lt;-</span> <span class="fu">rbind</span>(boxplot_2003_nonteachers, boxplot_2006_nonteachers, boxplot_2009_nonteachers, boxplot_2015_nonteachers) <span class="sc">%&gt;%</span></span>
<span id="cb83-50"><a href="#cb83-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="cn">FALSE</span>)</span>
<span id="cb83-51"><a href="#cb83-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-52"><a href="#cb83-52" aria-hidden="true" tabindex="-1"></a><span class="co"># binding together</span></span>
<span id="cb83-53"><a href="#cb83-53" aria-hidden="true" tabindex="-1"></a>pisa_boxplot_stats <span class="ot">&lt;-</span> <span class="fu">rbind</span>(pisa_boxplot_stats, pisa_boxplot_stats_nt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>teacher_fact <span class="ot">&lt;-</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  pisa_boxplot_stats <span class="sc">|&gt;</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">teacher =</span> <span class="fu">fct_recode</span>(<span class="fu">factor</span>(teacher), </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Non-teacher"</span> <span class="ot">=</span> <span class="st">'FALSE'</span>, </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Teacher"</span> <span class="ot">=</span> <span class="st">'TRUE'</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(Year), </span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>                           <span class="at">fill =</span> teacher,</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">col =</span> teacher,</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>                           <span class="at">ymin =</span> Lower_whisker, <span class="at">lower =</span> Q1, <span class="at">middle =</span> Q2, <span class="at">upper =</span> Q3, <span class="at">ymax =</span> Upper_whisker)) <span class="sc">+</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, </span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"PISA score"</span>, </span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Teachers tended to perform better across the performance spectrum"</span>,</span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="fu">glue</span>(<span class="st">"Scores in PISA mathematics of {colour_text(grattan_red, 'teachers')} and {colour_text(grattan_orange, 'non-teachers')} across years}"</span>), </span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"Notes: The boxplots show the median, interquartile range, and 10th and 90th percentiles."</span>) <span class="sc">+</span></span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true" tabindex="-1"></a>teacher_fact <span class="ot">&lt;-</span> teacher_fact <span class="sc">+</span></span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_grattan</span>(<span class="at">chart_type =</span> <span class="st">"normal"</span>, </span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipped =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb84-22"><a href="#cb84-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_markdown</span>()) <span class="sc">+</span></span>
<span id="cb84-23"><a href="#cb84-23" aria-hidden="true" tabindex="-1"></a>  ggdirectlabel<span class="sc">::</span><span class="fu">geom_richlegend</span>(aes</span>
<span id="cb84-24"><a href="#cb84-24" aria-hidden="true" tabindex="-1"></a>                                 (<span class="at">label =</span> <span class="fu">fct_rev</span>(teacher))</span>
<span id="cb84-25"><a href="#cb84-25" aria-hidden="true" tabindex="-1"></a>                                 ) <span class="sc">+</span></span>
<span id="cb84-26"><a href="#cb84-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_y_continuous</span>() <span class="sc">+</span></span>
<span id="cb84-27"><a href="#cb84-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grattan_fill_manual</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">faded_level =</span> <span class="dv">4</span>)</span>
<span id="cb84-28"><a href="#cb84-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-29"><a href="#cb84-29" aria-hidden="true" tabindex="-1"></a>teacher_fact</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="LSAY_EDA_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>facet by year ^</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save key charts</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>plot_list_for_export <span class="ot">&lt;-</span> <span class="fu">list</span>(total_agg_prof,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>                             teacher_count_plot,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>                             teacher_fact, </span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>                             profession_visualisation)</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="fu">grattan_save_pptx</span>(plot_list_for_export, <span class="at">filename =</span> <span class="st">"atlas/LSAY_plots.pptx"</span>)</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="fu">grattan_save_pptx</span>(teacher_count_plot, <span class="at">filename =</span> <span class="st">"atlas/teacher_count.pptx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>